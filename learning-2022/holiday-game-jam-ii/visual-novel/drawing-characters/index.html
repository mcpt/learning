<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.110.0"><meta name=generator content="Relearn 2.9.2
"><meta name=description content><title>Drawing Characters :: MCPT Learning Resources</title><link href=/css/nucleus.css?1677174617 rel=stylesheet><link href=/css/fontawesome-all.min.css?1677174617 rel=stylesheet><link href=/css/featherlight.min.css?1677174617 rel=stylesheet><link href=/css/perfect-scrollbar.min.css?1677174617 rel=stylesheet><link href=/css/auto-complete.css?1677174617 rel=stylesheet><link href=/css/theme.css?1677174617 rel=stylesheet><link href=/css/theme-mcpt.css?1677174617 rel=stylesheet><link href=/css/variant.css?1677174617 rel=stylesheet><link href=/css/print.css?1677174617 rel=stylesheet media=print><link href=/css/p5js.css?1677174617 rel=stylesheet><link href=/css/sidebar.css?1677174617 rel=stylesheet><script src=/js/jquery.min.js?1677174617></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style><script src=/js/p5.min.js></script></head><body data-url=/learning-2022/holiday-game-jam-ii/visual-novel/drawing-characters/><script>var index_url="/index.json",root_url="/",baseUri=root_url.replace(/\/$/,"")</script><nav id=sidebar><div id=header-wrapper><div id=header><a href=/><img src=https://mcpt.ca/static/icons/logo.png><br><span class=subheading>LEARNING</span></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script src=/js/lunr.min.js?1677174617></script>
<script src=/js/auto-complete.js?1677174617></script>
<script src=/js/search.js?1677174617></script></div><div id=homelinks><ul><li><a class=padding href=/><i class="fas fa-home"></i> Home</a></li></ul></div><div class=highlightable><ul class=topics><li data-nav-id=/learning-2021/ title="Learning 2021" class=dd-item><a href=/learning-2021/>Learning 2021</a><ul><li data-nav-id=/learning-2021/game-dev/ title="Game Series" class="dd-item alwaysopen"><a href=/learning-2021/game-dev/>Game Series</a><ul><li data-nav-id=/learning-2021/game-dev/leaderboard/ title=Leaderboard class=dd-item><a href=/learning-2021/game-dev/leaderboard/>Leaderboard</a></li><li data-nav-id=/learning-2021/game-dev/part-i/ title="Part I" class=dd-item><a href=/learning-2021/game-dev/part-i/><b>1.</b> Part I</a><ul><li data-nav-id=/learning-2021/game-dev/part-i/introduction/ title=Introduction class=dd-item><a href=/learning-2021/game-dev/part-i/introduction/>Introduction</a></li><li data-nav-id=/learning-2021/game-dev/part-i/draganddrop/ title="Drag And Drop" class=dd-item><a href=/learning-2021/game-dev/part-i/draganddrop/>Drag And Drop</a></li><li data-nav-id=/learning-2021/game-dev/part-i/towers/ title="Rotating Towers" class=dd-item><a href=/learning-2021/game-dev/part-i/towers/>Rotating Towers</a></li><li data-nav-id=/learning-2021/game-dev/part-i/pathforballoons/ title="Path For Balloons" class=dd-item><a href=/learning-2021/game-dev/part-i/pathforballoons/>Path For Balloons</a></li><li data-nav-id=/learning-2021/game-dev/part-i/challenge/ title="Challenge: Movement" class=dd-item><a href=/learning-2021/game-dev/part-i/challenge/>Challenge: Movement</a></li><li data-nav-id=/learning-2021/game-dev/part-i/updatingballoons/ title="Balloon Waves" class=dd-item><a href=/learning-2021/game-dev/part-i/updatingballoons/>Balloon Waves</a></li><li data-nav-id=/learning-2021/game-dev/part-i/healthchecking/ title="Health Bar" class=dd-item><a href=/learning-2021/game-dev/part-i/healthchecking/>Health Bar</a></li><li data-nav-id=/learning-2021/game-dev/part-i/towervaliditychecking/ title="Tower Validity Checking" class=dd-item><a href=/learning-2021/game-dev/part-i/towervaliditychecking/>Tower Validity Checking</a></li></ul></li><li data-nav-id=/learning-2021/game-dev/part-ii/ title="Part II" class=dd-item><a href=/learning-2021/game-dev/part-ii/><b>2.</b> Part II</a><ul><li data-nav-id=/learning-2021/game-dev/part-ii/introduction/ title=Introduction class=dd-item><a href=/learning-2021/game-dev/part-ii/introduction/>Introduction</a></li><li data-nav-id=/learning-2021/game-dev/part-ii/advancedtracking/ title="Advanced Tracking" class=dd-item><a href=/learning-2021/game-dev/part-ii/advancedtracking/>Advanced Tracking</a></li><li data-nav-id=/learning-2021/game-dev/part-ii/currency/ title="Currency System" class=dd-item><a href=/learning-2021/game-dev/part-ii/currency/>Currency System</a></li><li data-nav-id=/learning-2021/game-dev/part-ii/newtower/ title="New Towers" class=dd-item><a href=/learning-2021/game-dev/part-ii/newtower/>New Towers</a></li><li data-nav-id=/learning-2021/game-dev/part-ii/projectiles/ title=Projectiles class=dd-item><a href=/learning-2021/game-dev/part-ii/projectiles/>Projectiles</a></li></ul></li><li data-nav-id=/learning-2021/game-dev/part-iii/ title="Part III" class=dd-item><a href=/learning-2021/game-dev/part-iii/><b>3.</b> Part III</a><ul><li data-nav-id=/learning-2021/game-dev/part-iii/introduction/ title=Introduction class=dd-item><a href=/learning-2021/game-dev/part-iii/introduction/>Introduction</a></li><li data-nav-id=/learning-2021/game-dev/part-iii/currency/ title="More Currency" class=dd-item><a href=/learning-2021/game-dev/part-iii/currency/>More Currency</a></li><li data-nav-id=/learning-2021/game-dev/part-iii/upgrades/ title="Tower Upgrades" class=dd-item><a href=/learning-2021/game-dev/part-iii/upgrades/>Tower Upgrades</a></li><li data-nav-id=/learning-2021/game-dev/part-iii/userinterface/ title="User Interface" class=dd-item><a href=/learning-2021/game-dev/part-iii/userinterface/>User Interface</a></li><li data-nav-id=/learning-2021/game-dev/part-iii/makinglevels/ title="Making Levels" class=dd-item><a href=/learning-2021/game-dev/part-iii/makinglevels/>Making Levels</a></li><li data-nav-id=/learning-2021/game-dev/part-iii/pathcreationapi/ title="Path Creation API" class=dd-item><a href=/learning-2021/game-dev/part-iii/pathcreationapi/>Path Creation API</a></li><li data-nav-id=/learning-2021/game-dev/part-iii/powerups/ title=Powerups class=dd-item><a href=/learning-2021/game-dev/part-iii/powerups/>Powerups</a></li><li data-nav-id=/learning-2021/game-dev/part-iii/challenge/ title=Challenges class=dd-item><a href=/learning-2021/game-dev/part-iii/challenge/>Challenges</a></li></ul></li></ul></li><li data-nav-id=/learning-2021/game-jam/ title="Game Jam" class="dd-item alwaysopen"><a href=/learning-2021/game-jam/>Game Jam</a><ul><li data-nav-id=/learning-2021/game-jam/leaderboard/ title=Leaderboard class=dd-item><a href=/learning-2021/game-jam/leaderboard/>Leaderboard</a></li><li data-nav-id=/learning-2021/game-jam/tetris-workshop/ title="Tetris Workshop" class=dd-item><a href=/learning-2021/game-jam/tetris-workshop/>Tetris Workshop</a><ul><li data-nav-id=/learning-2021/game-jam/tetris-workshop/object-oriented-programming/ title="Object Oriented Programming" class=dd-item><a href=/learning-2021/game-jam/tetris-workshop/object-oriented-programming/>Object Oriented Programming</a></li><li data-nav-id=/learning-2021/game-jam/tetris-workshop/multi-dimensional-arrays/ title="Multi-Dimensional Arrays" class=dd-item><a href=/learning-2021/game-jam/tetris-workshop/multi-dimensional-arrays/>Multi-Dimensional Arrays</a></li><li data-nav-id=/learning-2021/game-jam/tetris-workshop/threads/ title=Multi-Threading class=dd-item><a href=/learning-2021/game-jam/tetris-workshop/threads/>Multi-Threading</a></li><li data-nav-id=/learning-2021/game-jam/tetris-workshop/tetris/ title=Tetris class=dd-item><a href=/learning-2021/game-jam/tetris-workshop/tetris/>Tetris</a></li></ul></li><li data-nav-id=/learning-2021/game-jam/jumpingphysics/ title="Jumping Physics Workshop" class=dd-item><a href=/learning-2021/game-jam/jumpingphysics/>Jumping Physics Workshop</a><ul><li data-nav-id=/learning-2021/game-jam/jumpingphysics/collisions/ title=Collisions class=dd-item><a href=/learning-2021/game-jam/jumpingphysics/collisions/>Collisions</a></li><li data-nav-id=/learning-2021/game-jam/jumpingphysics/jumpingphysics/ title="Jumping Physics" class=dd-item><a href=/learning-2021/game-jam/jumpingphysics/jumpingphysics/>Jumping Physics</a></li></ul></li><li data-nav-id=/learning-2021/game-jam/resources/ title=Resources class=dd-item><a href=/learning-2021/game-jam/resources/>Resources</a><ul><li data-nav-id=/learning-2021/game-jam/resources/github/ title="A Github Crash Course" class="dd-item alwaysopen"><a href=/learning-2021/game-jam/resources/github/>A Github Crash Course</a><ul></ul></li><li data-nav-id=/learning-2021/game-jam/resources/devpost-info/ title="Devpost Information" class="dd-item alwaysopen"><a href=/learning-2021/game-jam/resources/devpost-info/>Devpost Information</a><ul></ul></li><li data-nav-id=/learning-2021/game-jam/resources/tips/ title="Tips & Tricks" class="dd-item alwaysopen"><a href=/learning-2021/game-jam/resources/tips/>Tips & Tricks</a><ul></ul></li><li data-nav-id=/learning-2021/game-jam/resources/pitch/ title="Pitch Creation" class="dd-item alwaysopen"><a href=/learning-2021/game-jam/resources/pitch/>Pitch Creation</a><ul></ul></li></ul></li></ul></li><li data-nav-id=/learning-2021/lyon-hacks/ title=LyonHacks class="dd-item alwaysopen"><a href=/learning-2021/lyon-hacks/>LyonHacks</a><ul><li data-nav-id=/learning-2021/lyon-hacks/season-ii/ title="LyonHacks Season II" class="dd-item alwaysopen"><a href=/learning-2021/lyon-hacks/season-ii/>LyonHacks Season II</a><ul></ul></li><li data-nav-id=/learning-2021/lyon-hacks/legacy/ title="Legacy Events" class=dd-item><a href=/learning-2021/lyon-hacks/legacy/>Legacy Events</a><ul><li data-nav-id=/learning-2021/lyon-hacks/legacy/season-i/ title="Season I" class=dd-item><a href=/learning-2021/lyon-hacks/legacy/season-i/>Season I</a></li></ul></li></ul></li></ul></li><li data-nav-id=/learning-2022/ title="Learning 2022" class="dd-item parent"><a href=/learning-2022/>Learning 2022</a><ul><li data-nav-id=/learning-2022/holiday-game-jam-ii/ title="Holiday Game Jam II " class="dd-item parent alwaysopen"><a href=/learning-2022/holiday-game-jam-ii/>Holiday Game Jam II</a><ul><li data-nav-id=/learning-2022/holiday-game-jam-ii/stealing-christmas/ title="Platformer Game Workshop" class=dd-item><a href=/learning-2022/holiday-game-jam-ii/stealing-christmas/>Platformer Game Workshop</a><ul><li data-nav-id=/learning-2022/holiday-game-jam-ii/stealing-christmas/movement/ title="Basic Player Movement" class=dd-item><a href=/learning-2022/holiday-game-jam-ii/stealing-christmas/movement/>Basic Player Movement</a></li><li data-nav-id=/learning-2022/holiday-game-jam-ii/stealing-christmas/collisions/ title=Collisions class=dd-item><a href=/learning-2022/holiday-game-jam-ii/stealing-christmas/collisions/>Collisions</a></li><li data-nav-id=/learning-2022/holiday-game-jam-ii/stealing-christmas/physics/ title="Jumping Physics" class=dd-item><a href=/learning-2022/holiday-game-jam-ii/stealing-christmas/physics/>Jumping Physics</a></li></ul></li><li data-nav-id=/learning-2022/holiday-game-jam-ii/visual-novel/ title="Visual Novel Workshop" class="dd-item parent"><a href=/learning-2022/holiday-game-jam-ii/visual-novel/>Visual Novel Workshop</a><ul><li data-nav-id=/learning-2022/holiday-game-jam-ii/visual-novel/reading-json/ title="Reading JSON" class=dd-item><a href=/learning-2022/holiday-game-jam-ii/visual-novel/reading-json/>Reading JSON</a></li><li data-nav-id=/learning-2022/holiday-game-jam-ii/visual-novel/drawing-characters/ title="Drawing Characters" class="dd-item active"><a href=/learning-2022/holiday-game-jam-ii/visual-novel/drawing-characters/>Drawing Characters</a></li><li data-nav-id=/learning-2022/holiday-game-jam-ii/visual-novel/dialogue-writing/ title="Writing Dialogue" class=dd-item><a href=/learning-2022/holiday-game-jam-ii/visual-novel/dialogue-writing/>Writing Dialogue</a></li><li data-nav-id=/learning-2022/holiday-game-jam-ii/visual-novel/dialogue-options/ title="Dialogue Options" class=dd-item><a href=/learning-2022/holiday-game-jam-ii/visual-novel/dialogue-options/>Dialogue Options</a></li></ul></li><li data-nav-id=/learning-2022/holiday-game-jam-ii/resources/ title="Game Jam Resource Page" class="dd-item alwaysopen"><a href=/learning-2022/holiday-game-jam-ii/resources/>Game Jam Resource Page</a><ul><li data-nav-id=/learning-2022/holiday-game-jam-ii/resources/devpost-help/ title="Devpost Information" class="dd-item alwaysopen"><a href=/learning-2022/holiday-game-jam-ii/resources/devpost-help/>Devpost Information</a><ul></ul></li><li data-nav-id=/learning-2022/holiday-game-jam-ii/resources/github-tutorial/ title="GitHub Tutorial" class="dd-item alwaysopen"><a href=/learning-2022/holiday-game-jam-ii/resources/github-tutorial/>GitHub Tutorial</a><ul></ul></li></ul></li></ul></li><li data-nav-id=/learning-2022/game-development-workshop/ title="Game Dev Workshop" class="dd-item alwaysopen"><a href=/learning-2022/game-development-workshop/>Game Dev Workshop</a><ul><li data-nav-id=/learning-2022/game-development-workshop/partone/ title="Part One" class=dd-item><a href=/learning-2022/game-development-workshop/partone/>Part One</a></li></ul></li><li data-nav-id=/learning-2022/web-development-workshop/ title="Web Dev Workshop" class="dd-item alwaysopen"><a href=/learning-2022/web-development-workshop/>Web Dev Workshop</a><ul><li data-nav-id=/learning-2022/web-development-workshop/running-html-files/ title="Opening HTML Files in Your Browser" class="dd-item alwaysopen"><a href=/learning-2022/web-development-workshop/running-html-files/>Opening HTML Files in Your Browser</a><ul></ul></li><li data-nav-id=/learning-2022/web-development-workshop/editing-html-files/ title="Editing HTML Files" class="dd-item alwaysopen"><a href=/learning-2022/web-development-workshop/editing-html-files/>Editing HTML Files</a><ul></ul></li></ul></li></ul></li></ul><div id=footer><a href=https://mcpt.ca/><p><object type=image/svg+xml data=/img/footer-icon.svg></object>
mcpt.ca</p></a><a href=https://github.com/mcpt/learning><p><i class="fab fa-github-alt"></i> source</p></a></div></div></nav><div id=body><div id=overlay></div><div class="padding highlightable"><div id=top-bar><div id=breadcrumbs><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="5"><a itemprop=item href=/><span itemprop=name>Home</span></a> ></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="4"><a itemprop=item href=/learning-2022/><span itemprop=name>Learning 2022</span></a> ></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3"><a itemprop=item href=/learning-2022/holiday-game-jam-ii/><span itemprop=name>Holiday Game Jam II</span></a> ></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="2"><a itemprop=item href=/learning-2022/holiday-game-jam-ii/visual-novel/><span itemprop=name>Visual Novel Workshop</span></a> ></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="1"><a itemprop=item href=/learning-2022/holiday-game-jam-ii/visual-novel/drawing-characters/ aria-disabled=true><span itemprop=name>Drawing Characters</span></a></li></ol></div><div class=progress><div class=wrapper><nav id=TableOfContents></nav></div></div></div><div id=head-tags></div><main id=body-inner><h1>Drawing Characters</h1><p>Now that we have some dialogue, why don&rsquo;t we associate those words with a character?</p><h1 id=storing-character-data>Storing Character Data</h1><p>We can tango one of two ways:</p><ol><li>We make a &ldquo;character archive&rdquo;, and read from said archive every time we want to draw a character</li><li>We attach the related character data to each dialogue file</li></ol><p>The first one is the better option for the long term but takes lots more work. In a game jam, speed is key! This exactly why we&rsquo;ll be showing you option two.</p><p>We can attach a little bit of character data to the beginning of each dialogue file like so:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;characters&#34;</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;name&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Me&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;link&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;dog.jpg&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;x&#34;</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>100</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;y&#34;</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>100</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;w&#34;</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>250</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;h&#34;</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>250</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;name&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;You&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;link&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;cat.png&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;x&#34;</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>600</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;y&#34;</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>100</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;w&#34;</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>250</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;h&#34;</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>250</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  ],
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;data&#34;</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;speaker&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Me&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;dialogue&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Hi!&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;speaker&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;You&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;dialogue&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Hi!&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;speaker&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Me&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;dialogue&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Hello!&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  ],
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;successors&#34;</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#34;dialogue2.json&#34;</span>],
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;options&#34;</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#34;option1&#34;</span>]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h1 id=accessing-character-data>Accessing Character Data</h1><p>Since we store the whole object as a <code>JSONObject</code> in the code, we can also access the character data pretty easily!</p><p>We can make some quick little functions to do this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>JSONObject</span> <span style=color:#a6e22e>getCharacter</span>(<span style=color:#a6e22e>JSONObject</span> <span style=color:#a6e22e>obj</span>,String <span style=color:#a6e22e>charname</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>JSONArray</span> <span style=color:#a6e22e>array</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>obj</span>.<span style=color:#a6e22e>getJSONArray</span>(<span style=color:#e6db74>&#34;characters&#34;</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>array</span>.<span style=color:#a6e22e>size</span>();<span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>array</span>.<span style=color:#a6e22e>getJSONObject</span>(<span style=color:#a6e22e>i</span>).<span style=color:#a6e22e>getString</span>(<span style=color:#e6db74>&#34;name&#34;</span>).<span style=color:#a6e22e>equals</span>(<span style=color:#a6e22e>charname</span>)) <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>array</span>.<span style=color:#a6e22e>getJSONObject</span>(<span style=color:#a6e22e>i</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>This first one will search the <code>characters</code> array for something with a key that is the same as the character&rsquo;s name. If it can&rsquo;t find it, it&rsquo;ll return a null, which will result in the program erroring. (which is good!)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>JSONArray</span> <span style=color:#a6e22e>getCharacterList</span>(<span style=color:#a6e22e>JSONObject</span> <span style=color:#a6e22e>obj</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>obj</span>.<span style=color:#a6e22e>getJSONArray</span>(<span style=color:#e6db74>&#34;characters&#34;</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>This one will just get the <code>JSONArray</code> of characters, useful for when we want to read some data, like <code>x</code>, <code>y</code>, <code>w</code>, <code>h</code>.</p><p>From here, we can get the image, which will be stored in the <code>data</code> folder.</p><h1 id=drawing-the-character>Drawing The Character</h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>JSONArray list <span style=color:#f92672>=</span> getCharacterList<span style=color:#f92672>(</span>current<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> list<span style=color:#f92672>.</span><span style=color:#a6e22e>size</span><span style=color:#f92672>();</span>i<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    JSONObject object <span style=color:#f92672>=</span> list<span style=color:#f92672>.</span><span style=color:#a6e22e>getJSONObject</span><span style=color:#f92672>(</span>i<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    image<span style=color:#f92672>(</span>loadImage<span style=color:#f92672>(</span>object<span style=color:#f92672>.</span><span style=color:#a6e22e>getString</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;link&#34;</span><span style=color:#f92672>)),</span> object<span style=color:#f92672>.</span><span style=color:#a6e22e>getInt</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;x&#34;</span><span style=color:#f92672>),</span> object<span style=color:#f92672>.</span><span style=color:#a6e22e>getInt</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;y&#34;</span><span style=color:#f92672>),</span> object<span style=color:#f92672>.</span><span style=color:#a6e22e>getInt</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;w&#34;</span><span style=color:#f92672>),</span> object<span style=color:#f92672>.</span><span style=color:#a6e22e>getInt</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;h&#34;</span><span style=color:#f92672>));</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>Woah, that&rsquo;s a doozy! Let&rsquo;s break it down piece by piece.</p><p>First, we get the character list of the active dialogue file, using the <code>getCharacterList</code> method we made. Pretty simple.</p><p>We iterate through every character entry since we want to draw every character. We get the <code>JSONObject</code> for the character.</p><p>We use this <code>JSONObject</code> to draw an image. We read the <code>link</code> attribute and pass that into <code>loadImage</code> to draw it. Do note that <code>loadImage</code> should ideally be called once, to prevent lag.</p><p>We then read the <code>x</code>, <code>y</code>, <code>w</code>, and <code>h</code> values to figure out where to draw it, and how big to draw it.</p><p>If we just toss this code into our <code>draw</code> function, it&rsquo;ll draw the characters!</p><p><strong>BUT!</strong> We notice some dips in our performance! 😢</p><h1 id=wuh-woh>Wuh Woh!</h1><p>We can track this down to the <code>loadImage</code> function, since it has to load the image every frame, for every character. That&rsquo;s what&rsquo;s causing the lag.</p><p>Let&rsquo;s do a little trick here:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>(!</span>drawn<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    background<span style=color:#f92672>(</span><span style=color:#ae81ff>127</span><span style=color:#f92672>,</span><span style=color:#ae81ff>127</span><span style=color:#f92672>,</span><span style=color:#ae81ff>127</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    JSONArray list <span style=color:#f92672>=</span> getCharacterList<span style=color:#f92672>(</span>current<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> list<span style=color:#f92672>.</span><span style=color:#a6e22e>size</span><span style=color:#f92672>();</span>i<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        JSONObject object <span style=color:#f92672>=</span> list<span style=color:#f92672>.</span><span style=color:#a6e22e>getJSONObject</span><span style=color:#f92672>(</span>i<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>object<span style=color:#f92672>.</span><span style=color:#a6e22e>getString</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;name&#34;</span><span style=color:#f92672>).</span><span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span>curSpeaker<span style=color:#f92672>))</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            noTint<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            image<span style=color:#f92672>(</span>loadImage<span style=color:#f92672>(</span>object<span style=color:#f92672>.</span><span style=color:#a6e22e>getString</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;link&#34;</span><span style=color:#f92672>)),</span>object<span style=color:#f92672>.</span><span style=color:#a6e22e>getInt</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;x&#34;</span><span style=color:#f92672>),</span>object<span style=color:#f92672>.</span><span style=color:#a6e22e>getInt</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;y&#34;</span><span style=color:#f92672>),</span>object<span style=color:#f92672>.</span><span style=color:#a6e22e>getInt</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;w&#34;</span><span style=color:#f92672>),</span>object<span style=color:#f92672>.</span><span style=color:#a6e22e>getInt</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;h&#34;</span><span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    drawn <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>We limit the number of times it&rsquo;s drawn to once every dialogue piece. When we click, we can set <code>drawn</code> to false to ensure that it gets updated, and the lag magically disappears!</p><p>The sharp-eyed amongst you will realize something off&mldr;</p><p>What on God&rsquo;s green earth is <code>noTint</code>??? And what is this <code>object.getString("name").equals(curSpeaker)</code>???</p><p>Well, we want to emphasize whichever character is speaking at the moment. This is for those with short attention spans in the crowd (like me), and need a little bit of visual feedback to know which character is talking. To do this, we can colour in the current speaking character, and grey out the other ones. Let me add in the rest of the code:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>(!</span>drawn<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    background<span style=color:#f92672>(</span><span style=color:#ae81ff>127</span><span style=color:#f92672>,</span><span style=color:#ae81ff>127</span><span style=color:#f92672>,</span><span style=color:#ae81ff>127</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    JSONArray list <span style=color:#f92672>=</span> getCharacterList<span style=color:#f92672>(</span>current<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> list<span style=color:#f92672>.</span><span style=color:#a6e22e>size</span><span style=color:#f92672>();</span>i<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        JSONObject object <span style=color:#f92672>=</span> list<span style=color:#f92672>.</span><span style=color:#a6e22e>getJSONObject</span><span style=color:#f92672>(</span>i<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>object<span style=color:#f92672>.</span><span style=color:#a6e22e>getString</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;name&#34;</span><span style=color:#f92672>).</span><span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span>curSpeaker<span style=color:#f92672>))</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            noTint<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            image<span style=color:#f92672>(</span>loadImage<span style=color:#f92672>(</span>object<span style=color:#f92672>.</span><span style=color:#a6e22e>getString</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;link&#34;</span><span style=color:#f92672>)),</span> object<span style=color:#f92672>.</span><span style=color:#a6e22e>getInt</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;x&#34;</span><span style=color:#f92672>),</span> object<span style=color:#f92672>.</span><span style=color:#a6e22e>getInt</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;y&#34;</span><span style=color:#f92672>),</span> object<span style=color:#f92672>.</span><span style=color:#a6e22e>getInt</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;w&#34;</span><span style=color:#f92672>),</span> object<span style=color:#f92672>.</span><span style=color:#a6e22e>getInt</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;h&#34;</span><span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>else</span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            tint<span style=color:#f92672>(</span><span style=color:#ae81ff>127</span><span style=color:#f92672>,</span><span style=color:#ae81ff>127</span><span style=color:#f92672>,</span><span style=color:#ae81ff>127</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            image<span style=color:#f92672>(</span>loadImage<span style=color:#f92672>(</span>object<span style=color:#f92672>.</span><span style=color:#a6e22e>getString</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;link&#34;</span><span style=color:#f92672>)),</span> object<span style=color:#f92672>.</span><span style=color:#a6e22e>getInt</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;x&#34;</span><span style=color:#f92672>),</span> object<span style=color:#f92672>.</span><span style=color:#a6e22e>getInt</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;y&#34;</span><span style=color:#f92672>),</span> object<span style=color:#f92672>.</span><span style=color:#a6e22e>getInt</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;w&#34;</span><span style=color:#f92672>),</span> object<span style=color:#f92672>.</span><span style=color:#a6e22e>getInt</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;h&#34;</span><span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    drawn <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>Whoo! It works! We can use this to draw the characters in the scene!</p><p>Next on the list, we have <em>writing dialogue</em>.</p><footer class=footline></footer></main></div><div id=navigation><a class="nav nav-prev" href=/learning-2022/holiday-game-jam-ii/visual-novel/reading-json/ title="Reading JSON"><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=/learning-2022/holiday-game-jam-ii/visual-novel/dialogue-writing/ title="Writing Dialogue"><i class="fa fa-chevron-right"></i></a></div></div><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js?1677174617></script>
<script src=/js/perfect-scrollbar.min.js?1677174617></script>
<script src=/js/perfect-scrollbar.jquery.min.js?1677174617></script>
<script src=/js/jquery.svg.pan.zoom.js?1677174617></script>
<script src=/js/featherlight.min.js?1677174617></script>
<script src=/js/modernizr.custom-3.6.0.js?1677174617></script>
<script src=/js/mermaid.min.js?1677174617></script>
<script>typeof mermaid!="undefined"&&typeof mermaid.mermaidAPI!="undefined"&&mermaid.mermaidAPI.initialize(Object.assign({securityLevel:"antiscript"},JSON.parse('{ "startOnLoad": true }'),{startOnLoad:!1}))</script><script src=/js/relearn.js?1677174617></script></body></html>