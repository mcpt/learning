<!doctype html><html lang=en class="js csstransforms3d">
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=generator content="Hugo 0.90.1">
<meta name=description content>
<title>Challenge: Movement :: MCPT Learning Resources</title>
<link href=/css/nucleus.css?1639687791 rel=stylesheet>
<link href=/css/fontawesome-all.min.css?1639687791 rel=stylesheet>
<link href=/css/featherlight.min.css?1639687791 rel=stylesheet>
<link href=/css/perfect-scrollbar.min.css?1639687791 rel=stylesheet>
<link href=/css/auto-complete.css?1639687791 rel=stylesheet>
<link href=/css/theme.css?1639687791 rel=stylesheet>
<link href=/css/theme-mcpt.css?1639687791 rel=stylesheet>
<link href=/css/variant.css?1639687791 rel=stylesheet>
<link href=/css/print.css?1639687791 rel=stylesheet media=print>
<link href=/css/p5js.css?1639687791 rel=stylesheet>
<link href=/css/sidebar.css?1639687791 rel=stylesheet>
<script src=/js/p5.min.js></script>
<script src=/js/jquery.min.js?1639687791></script>
<style>:root #header+#content>#left>#rlblock_left{display:none!important}</style><style></style>
</head>
<body data-url=/game-dev/part-i/challenge/>
<nav id=sidebar>
<div id=header-wrapper>
<div id=header>
<a href=/>
<img src=https://mcpt.ca/static/icons/logo.png>
<br>
<span class=subheading>LEARNING</span>
</a>
</div>
<div class=searchbox>
<label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span>
</div>
<script src=/js/lunr.min.js?1639687791></script>
<script src=/js/auto-complete.js?1639687791></script>
<script>var index_url="/index.json",root_url="/",baseUri=root_url.replace(/\/$/,'')</script>
<script src=/js/search.js?1639687791></script>
</div>
<div id=homelinks>
<ul>
<li>
<a class=padding href=/><i class="fas fa-home"></i> Home</a>
</li>
</ul>
</div>
<div class=highlightable>
<ul class=topics>
<li data-nav-id=/game-dev/ title="Game Series" class="dd-item parent"><a href=/game-dev/>Game Series</a><ul>
<li data-nav-id=/game-dev/leaderboard/ title=Leaderboard class=dd-item><a href=/game-dev/leaderboard/>Leaderboard</a></li>
<li data-nav-id=/game-dev/part-i/ title="Part I" class="dd-item parent"><a href=/game-dev/part-i/><b>1.</b> Part I</a><ul>
<li data-nav-id=/game-dev/part-i/introduction/ title=Introduction class=dd-item><a href=/game-dev/part-i/introduction/>Introduction</a></li>
<li data-nav-id=/game-dev/part-i/draganddrop/ title="Drag And Drop" class=dd-item><a href=/game-dev/part-i/draganddrop/>Drag And Drop</a></li>
<li data-nav-id=/game-dev/part-i/towers/ title="Rotating Towers" class=dd-item><a href=/game-dev/part-i/towers/>Rotating Towers</a></li>
<li data-nav-id=/game-dev/part-i/pathforballoons/ title="Path For Balloons" class=dd-item><a href=/game-dev/part-i/pathforballoons/>Path For Balloons</a></li>
<li data-nav-id=/game-dev/part-i/challenge/ title="Challenge: Movement" class="dd-item active"><a href=/game-dev/part-i/challenge/>Challenge: Movement</a></li>
<li data-nav-id=/game-dev/part-i/updatingballoons/ title="Balloon Waves" class=dd-item><a href=/game-dev/part-i/updatingballoons/>Balloon Waves</a></li>
<li data-nav-id=/game-dev/part-i/healthchecking/ title="Health Bar" class=dd-item><a href=/game-dev/part-i/healthchecking/>Health Bar</a></li>
<li data-nav-id=/game-dev/part-i/towervaliditychecking/ title="Tower Validity Checking" class=dd-item><a href=/game-dev/part-i/towervaliditychecking/>Tower Validity Checking</a></li></ul></li>
<li data-nav-id=/game-dev/part-ii/ title="Part II" class=dd-item><a href=/game-dev/part-ii/><b>2.</b> Part II</a><ul>
<li data-nav-id=/game-dev/part-ii/introduction/ title=Introduction class=dd-item><a href=/game-dev/part-ii/introduction/>Introduction</a></li>
<li data-nav-id=/game-dev/part-ii/advancedtracking/ title="Advanced Tracking" class=dd-item><a href=/game-dev/part-ii/advancedtracking/>Advanced Tracking</a></li>
<li data-nav-id=/game-dev/part-ii/currency/ title="Currency System" class=dd-item><a href=/game-dev/part-ii/currency/>Currency System</a></li>
<li data-nav-id=/game-dev/part-ii/newtower/ title="New Towers" class=dd-item><a href=/game-dev/part-ii/newtower/>New Towers</a></li>
<li data-nav-id=/game-dev/part-ii/projectiles/ title=Projectiles class=dd-item><a href=/game-dev/part-ii/projectiles/>Projectiles</a></li></ul></li>
<li data-nav-id=/game-dev/part-iii/ title="Part III" class=dd-item><a href=/game-dev/part-iii/><b>3.</b> Part III</a><ul>
<li data-nav-id=/game-dev/part-iii/introduction/ title=Introduction class=dd-item><a href=/game-dev/part-iii/introduction/>Introduction</a></li>
<li data-nav-id=/game-dev/part-iii/currency/ title="More Currency" class=dd-item><a href=/game-dev/part-iii/currency/>More Currency</a></li>
<li data-nav-id=/game-dev/part-iii/upgrades/ title="Tower Upgrades" class=dd-item><a href=/game-dev/part-iii/upgrades/>Tower Upgrades</a></li>
<li data-nav-id=/game-dev/part-iii/makinglevels/ title="Making Levels" class=dd-item><a href=/game-dev/part-iii/makinglevels/>Making Levels</a></li>
<li data-nav-id=/game-dev/part-iii/pathcreationapi/ title="Path Creation API" class=dd-item><a href=/game-dev/part-iii/pathcreationapi/>Path Creation API</a></li>
<li data-nav-id=/game-dev/part-iii/userinterface/ title="User Interface" class=dd-item><a href=/game-dev/part-iii/userinterface/>User Interface</a></li>
<li data-nav-id=/game-dev/part-iii/powerups/ title=Powerups class=dd-item><a href=/game-dev/part-iii/powerups/>Powerups</a></li>
<li data-nav-id=/game-dev/part-iii/challenge/ title=Challenges class=dd-item><a href=/game-dev/part-iii/challenge/>Challenges</a></li></ul></li></ul></li>
<li data-nav-id=/game-jam/ title="Game Jam" class=dd-item><a href=/game-jam/>Game Jam</a><ul></ul></li>
<li data-nav-id=/lyon-hacks/ title=LyonHacks class=dd-item><a href=/lyon-hacks/>LyonHacks</a><ul>
<li data-nav-id=/lyon-hacks/season-i/ title="Season I" class="dd-item alwaysopen"><a href=/lyon-hacks/season-i/>Season I</a><ul></ul></li>
<li data-nav-id=/lyon-hacks/season-ii/ title="Season II" class="dd-item alwaysopen"><a href=/lyon-hacks/season-ii/>Season II</a><ul></ul></li></ul></li>
</ul>
<div id=footer><a href=https://mcpt.ca/>
<p>
<object type=image/svg+xml data=/img/footer-icon.svg></object>
mcpt.ca
</p>
</a>
<a href=https://github.com/mcpt/learning><p><i class="fab fa-github-alt"></i> source</p></a>
</div>
</div>
</nav>
<div id=body>
<div id=overlay></div>
<div class="padding highlightable">
<div id=top-bar>
<div id=breadcrumbs>
<span id=sidebar-toggle-span>
<a href=# id=sidebar-toggle data-sidebar-toggle>
<i class="fas fa-bars"></i>
</a>
</span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span>
<ol class=links itemscope itemtype=http://schema.org/BreadcrumbList>
<meta itemprop=itemListOrder content="Descending">
<li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="4"><a itemprop=item href=/><span itemprop=name>Home</span></a> > </li>
<li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3"><a itemprop=item href=/game-dev/><span itemprop=name>Game Series</span></a> > </li>
<li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="2"><a itemprop=item href=/game-dev/part-i/><span itemprop=name>Part I</span></a> > </li>
<li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="1"><a itemprop=item href=/game-dev/part-i/challenge/ aria-disabled=true><span itemprop=name>Challenge: Movement</span></a></li>
</ol>
</div>
<div class=progress>
<div class=wrapper>
<nav id=TableOfContents>
<ul>
<li><a href=#moving-along-the-path>Moving along the path</a>
<ul>
<li><a href=#key-concepts>Key Concepts</a></li>
<li><a href=#coordinate-representations-for-positions>Coordinate representations for positions</a></li>
<li><a href=#distance-representations-for-positions>Distance representations for positions</a></li>
<li><a href=#representation-conversion>Representation Conversion</a></li>
<li><a href=#full-solution>Full Solution</a></li>
</ul>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div id=head-tags>
</div>
<main id=body-inner>
<h1>Challenge: Movement</h1>
<hr>
<h2 id=moving-along-the-path>Moving along the path</h2>
<p>Now that you&rsquo;ve created a custom path using the <code>ArrayList</code> structure, how are we going to get our balloons to move along it smoothly?</p>
<h3 id=key-concepts>Key Concepts</h3>
<ol>
<li><strong>Coordinate</strong> based representation</li>
<li><strong>Distance</strong> based representation</li>
<li>Converting between the two (Challenge)</li>
</ol>
<h3 id=coordinate-representations-for-positions>Coordinate representations for positions</h3>
<p>Normally when we have an object in a game that moves around, we will store two numbers - the <strong>x-coordinate</strong> and the <strong>y-coordinate</strong>.</p>
<p><img src=/img/coordinate.gif alt="Coordinate Representation"></p>
<p><strong>Drawing</strong> an object using coordinates is extremely simple - all we need to do is create a shape using one of our graphics functions (<code>ellipse()</code>, <code>rect()</code>, etc.) and it will draw a shape right there. Nothing new.</p>
<p><strong>Moving</strong> an object along our path with this representation, however, is difficult - because our path can contain lots of twists and turns, it is very hard to figure out the next location a balloon should travel to at any given time.</p>
<p><em>Is there a way we can simplify movement?</em></p>
<h3 id=distance-representations-for-positions>Distance representations for positions</h3>
<p>What if instead of storing two co-ordinates, we decided to store a single number, representing the <strong>distance travelled</strong> along our path?</p>
<p><img src=/img/distance.gif alt="Distance Representation"></p>
<p><strong>Moving</strong> an object with this representation is now very simple - all we need to do is increase this number by the <strong>speed</strong> of the balloon every frame.</p>
<p><strong>Drawing</strong> this object now becomes an issue - how are we supposed to figure out where the balloon is on the screen, just from a single number?</p>
<h3 id=representation-conversion>Representation Conversion</h3>
<p>In our game, we will make use of the benefits of <strong>both representations</strong> in order to move our balloons along the path.</p>
<p>Code-wise, we will <strong>store</strong> the <strong>distance travelled</strong> for each balloon and use the <strong>custom method</strong> <code>PVector getLocation(float travelDistance)</code> to convert from <strong>distance representation</strong> to the <strong>coordinate representation</strong>.</p>
<p>When we are displaying balloons, we will call this method and use the converted values in order to display our balloon.</p>
<div class="notices info">
<div class=label>Challenge</div><p>While this method is already implemented in the templates, we encourage you to try and come up with a solution yourself!</p>
<p>Create an <strong>written explanation</strong> on how such a method would work in theory, earning up to <strong>100</strong> extra points for the Game Jam, on top of the <strong>200</strong> participation points.</p>
<p>Submissions for this challenge are now <strong>closed.</strong></p>
</div>
<h3 id=full-solution>Full Solution</h3>
<div class=expand>
<a class=expand-label onclick="$t=$(this),$t.parent('.expand-expanded.expand-marked').length?$t.next().css('display','none'):$t.parent('.expand-marked').length?$t.next().css('display','block'):$t.next('.expand-content').slideToggle(100),$t.parent().toggleClass('expand-expanded')">
<i class="fas fa-chevron-down"></i>
<i class="fas fa-chevron-right"></i>
Expand Me!
</a>
<div class=expand-content style=display:none>
<p>Our solution can be split into two simpler steps:</p>
<ol>
<li>Looping through the &ldquo;lines&rdquo; formed by each consecutive pair of points, and finding which of the lines our balloon is currently on.</li>
<li>Finding the <strong>coordinate</strong> of the balloon given its <strong>progress</strong> along the smaller line.</li>
</ol>
<h3 id=line-identification>Line Identification</h3>
<p>To find out which one of the lines our balloon is currently on, we can iterate through each of the points that make up our path, &ldquo;travelling&rdquo; from one point to the next.</p>
<p>We can store a variable representing total <strong>remaining</strong> distance to find which of the lines our balloon currently lies on. Let us call this variable <code>remainingDist</code>.</p>
<p>At the beginning, this distance will be equal to the total travel distance that is inputted via the method parameter.</p>
<p>When we start looping through the <code>ArrayList</code>, we will compare the length of the <strong>current line</strong> and the remaining distance left to travel.</p>
<div class="notices tip">
<div class=label>Line Indexes</div><p>Recall that at a line is made up of two consecutive <code>PVectors</code>.</p>
<p>To iterate through each line, we use a for loop, such that at every index <code>i</code>, the line is composed of <code>points.get(i)</code> and <code>points.get(i + 1)</code>. To prevent errors, we will loop to the second-last index rather than the last, as <code>points.get(i + 1)</code> will otherwise attempt to access an index out of bounds.</p>
<p>The length of the current line can be found using the built-in <code>dist(float x1, float y1, float x2, float y2)</code> function to find the distance between two points using the pythagorean theorem.</p>
</div>
<p>Let&rsquo;s say we have an imaginary balloon that is moving along the path and needs to travel the initial <code>travelDistance</code>.</p>
<p>If the remaining distance left to travel is <strong>greater than or equal to</strong> the length of the line we&rsquo;re on, we can <strong>move</strong> to the next <strong>point</strong> in the path. The remaining distance left to travel now decreases by the length of this line.</p>
<p>If the remaining distance left to travel is <strong>smaller</strong> than the length of the line we&rsquo;re on, this must mean that the balloon is <strong>directly</strong> on top of this current line formed by <code>points.get(i)</code> and <code>points.get(i + 1)</code>. We can now move on to the second step and exit out of our loop.</p>
<ul>
<li>If by the <strong>end of the loop</strong>, the remaining distance left to travel is still greater than zero (and thus, we have not broken out of the loop), this means that we have travelled to the end of the path, and can <strong>return</strong> the <strong>last point</strong> inside the path.</li>
</ul>
<h3 id=progress-identification>Progress Identification</h3>
<p>Now that we know which two points our line is between, we can use math to figure out the exact location of our balloon.</p>
<p>If our <code>remainingDist</code> is not zero at this point, we will still have some distance left to travel along the <strong>line</strong> we are currently on, <strong>starting from the point</strong>, <code>points.get(i)</code>.</p>
<p>Let us call this point, <code>currentPoint</code> and the next point that forms a line with the current point, <code>nextPoint</code>.</p>
<p>In order to figure out where our balloon is, we can find a percent ratio between <code>remainingDist</code> and the length of the current line. This effectively gives us the <strong>progress</strong> travelled along the current line.</p>
<p>By breaking down this line into <strong>horizontal and vertical components</strong>, we can determine the distance you will need to travel left/right and the distance you will need to travel up/down to get from <code>currentPoint</code> to <code>nextPoint</code>.</p>
<p>Multiplying these components by the aforementioned <strong>progress</strong> will give us the exact values for how far left/right and how far up/down our balloon has <strong>travelled</strong> from <code>currentPoint</code>. Adding these new values to the co-ordinates of <code>currentPoint</code> will thus yield us with the location of the balloon, ready to return from our function!</p>
<div class="notices info">
<div class=label>Full Code</div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>PVector <span style=color:#a6e22e>getLocation</span><span style=color:#f92672>(</span><span style=color:#66d9ef>float</span> travelDistance<span style=color:#f92672>)</span>
<span style=color:#f92672>{</span>
  <span style=color:#66d9ef>float</span> remainingDist <span style=color:#f92672>=</span> travelDistance<span style=color:#f92672>;</span>
  <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> points<span style=color:#f92672>.</span><span style=color:#a6e22e>size</span><span style=color:#f92672>()</span> <span style=color:#f92672>-</span> 1<span style=color:#f92672>;</span> i<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
    PVector currentPoint <span style=color:#f92672>=</span> points<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>i<span style=color:#f92672>);</span>
    PVector nextPoint <span style=color:#f92672>=</span> points<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>i <span style=color:#f92672>+</span> 1<span style=color:#f92672>);</span>
    <span style=color:#66d9ef>float</span> distance <span style=color:#f92672>=</span> dist<span style=color:#f92672>(</span>currentPoint<span style=color:#f92672>.</span><span style=color:#a6e22e>x</span><span style=color:#f92672>,</span> currentPoint<span style=color:#f92672>.</span><span style=color:#a6e22e>y</span><span style=color:#f92672>,</span> nextPoint<span style=color:#f92672>.</span><span style=color:#a6e22e>x</span><span style=color:#f92672>,</span> nextPoint<span style=color:#f92672>.</span><span style=color:#a6e22e>y</span><span style=color:#f92672>);</span>
    <span style=color:#75715e>// Finding the length of an individual line using the built-in dist() function (Pythagorean Theorem)
</span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>remainingDist <span style=color:#f92672>&lt;</span> distance<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
      <span style=color:#75715e>// Step 2 - In between two points
</span><span style=color:#75715e></span>      <span style=color:#66d9ef>float</span> travelProgress <span style=color:#f92672>=</span> remainingDist <span style=color:#f92672>/</span> distance<span style=color:#f92672>;</span>
      <span style=color:#75715e>// travelProgress is the percent ratio of the remaining travel distance and the distance of the line the balloon is on
</span><span style=color:#75715e></span>      <span style=color:#75715e>// This will always be less than 1, if it was greater, this else code wouldn&#39;t run (remainingDist &gt;= distance)
</span><span style=color:#75715e></span>      <span style=color:#66d9ef>float</span> xDist <span style=color:#f92672>=</span> nextPoint<span style=color:#f92672>.</span><span style=color:#a6e22e>x</span> <span style=color:#f92672>-</span> currentPoint<span style=color:#f92672>.</span><span style=color:#a6e22e>x</span><span style=color:#f92672>;</span>
      <span style=color:#66d9ef>float</span> yDist <span style=color:#f92672>=</span> nextPoint<span style=color:#f92672>.</span><span style=color:#a6e22e>y</span> <span style=color:#f92672>-</span> currentPoint<span style=color:#f92672>.</span><span style=color:#a6e22e>y</span><span style=color:#f92672>;</span>
      <span style=color:#75715e>// We take the x and y distance between the two points along the line, multiply these distances by the ratio and add them to the FIRST point to get the specific location
</span><span style=color:#75715e></span>      <span style=color:#75715e>// This works because our ratio represents the travel progress - if it is close to 0, we are close to the first point, if it is close to 1, it is close to the second point 
</span><span style=color:#75715e></span>      <span style=color:#66d9ef>float</span> x <span style=color:#f92672>=</span> currentPoint<span style=color:#f92672>.</span><span style=color:#a6e22e>x</span> <span style=color:#f92672>+</span> xDist <span style=color:#f92672>*</span> travelProgress<span style=color:#f92672>;</span>
      <span style=color:#66d9ef>float</span> y <span style=color:#f92672>=</span> currentPoint<span style=color:#f92672>.</span><span style=color:#a6e22e>y</span> <span style=color:#f92672>+</span> yDist <span style=color:#f92672>*</span> travelProgress<span style=color:#f92672>;</span>
      <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> PVector<span style=color:#f92672>(</span>x<span style=color:#f92672>,</span> y<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span> <span style=color:#66d9ef>else</span> <span style=color:#f92672>{</span>
      remainingDist <span style=color:#f92672>-=</span> distance<span style=color:#f92672>;</span>
      <span style=color:#75715e>// As we loop through lines, we subtract the length of the line from the travel distance. This signifies a &#34;remainding&#34; travel distance from the nextPoint.
</span><span style=color:#75715e></span>      <span style=color:#75715e>// If the remaining travel distance is SMALLER than the distance of our current line, we know that we are in between two points and we can move onto the second step.
</span><span style=color:#75715e></span>    <span style=color:#f92672>}</span>
  <span style=color:#f92672>}</span>
  <span style=color:#75715e>// At end of path
</span><span style=color:#75715e></span>  <span style=color:#66d9ef>return</span> points<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>points<span style=color:#f92672>.</span><span style=color:#a6e22e>size</span><span style=color:#f92672>()</span> <span style=color:#f92672>-</span> 1<span style=color:#f92672>);</span>
<span style=color:#f92672>}</span>
</code></pre></div>
</div>
</div>
</div>
<footer class=footline>
</footer>
</main>
</div>
<div id=navigation>
<a class="nav nav-prev" href=/game-dev/part-i/pathforballoons/ title="Path For Balloons"><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=/game-dev/part-i/updatingballoons/ title="Balloon Waves"><i class="fa fa-chevron-right"></i></a>
</div>
</div>
<div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px>
<div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div>
</div>
<script src=/js/clipboard.min.js?1639687791></script>
<script src=/js/perfect-scrollbar.min.js?1639687791></script>
<script src=/js/perfect-scrollbar.jquery.min.js?1639687791></script>
<script src=/js/jquery.svg.pan.zoom.js?1639687791></script>
<script src=/js/featherlight.min.js?1639687791></script>
<script src=/js/modernizr.custom-3.6.0.js?1639687791></script>
<script src=/js/mermaid.min.js?1639687791></script>
<script>typeof mermaid!='undefined'&&mermaid.mermaidAPI.initialize(Object.assign({securityLevel:"antiscript"},JSON.parse('{ "startOnLoad": true }'),{startOnLoad:!1}))</script>
<script src=/js/relearn.js?1639687791></script>
</body>
</html>