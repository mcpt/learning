<!doctype html><html lang=en class="js csstransforms3d">
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=generator content="Hugo 0.89.2">
<meta name=description content>
<title>Drag And Drop :: MCPT Learning Resources</title>
<link href=/css/nucleus.css?1636776356 rel=stylesheet>
<link href=/css/fontawesome-all.min.css?1636776356 rel=stylesheet>
<link href=/css/featherlight.min.css?1636776356 rel=stylesheet>
<link href=/css/perfect-scrollbar.min.css?1636776356 rel=stylesheet>
<link href=/css/auto-complete.css?1636776356 rel=stylesheet>
<link href=/css/theme.css?1636776356 rel=stylesheet>
<link href=/css/theme-mcpt.css?1636776356 rel=stylesheet>
<link href=/css/variant.css?1636776356 rel=stylesheet>
<link href=/css/print.css?1636776356 rel=stylesheet media=print>
<script src=/js/p5.min.js></script>
<script src=/js/p5.sound.min.js></script>
<script src=/js/jquery.min.js?1636776356></script>
<style>:root #header+#content>#left>#rlblock_left{display:none!important}</style><style>#header{line-height:1;margin:2rem auto}#header .subheading{font-size:2rem;color:#edf0fb}#sidebar .searchbox #search-by,#sidebar .searchbox #search-by::placeholder{color:#fff}#sidebar .searchbox #search-by::placeholder{opacity:.65}.autocomplete-suggestion{border-color:#fff}.autocomplete-suggestion:first-child{border-top:1px solid #ffffff90}.autocomplete-suggestion.selected{background-color:#6969c7}#TableOfContents:empty{display:none}#footer{font-size:var(--FOOTER-TEXT-HEIGHT)}#footer object{height:var(--FOOTER-TEXT-HEIGHT);vertical-align:text-top}</style>
</head>
<body data-url=/game-dev/part-i/draganddrop/>
<nav id=sidebar>
<div id=header-wrapper>
<div id=header>
<a href=/>
<img src=https://mcpt.ca/static/icons/logo.png>
<span class=subheading>LEARNING</span>
</a>
</div>
<div class=searchbox>
<label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span>
</div>
<script src=/js/lunr.min.js?1636776356></script>
<script src=/js/auto-complete.js?1636776356></script>
<script>var index_url="/index.json",root_url="/",baseUri=root_url.replace(/\/$/,'')</script>
<script src=/js/search.js?1636776356></script>
</div>
<div id=homelinks>
<ul>
<li>
<a class=padding href=/><i class="fas fa-home"></i> Home</a>
</li>
</ul>
</div>
<div class=highlightable>
<ul class=topics>
<li data-nav-id=/game-dev/ title="Game Series" class="dd-item parent"><a href=/game-dev/>Game Series</a><ul>
<li data-nav-id=/game-dev/leaderboard/ title=Leaderboard class=dd-item><a href=/game-dev/leaderboard/>Leaderboard</a></li>
<li data-nav-id=/game-dev/part-i/ title="Part I" class="dd-item parent"><a href=/game-dev/part-i/><b>1.</b> Part I</a><ul>
<li data-nav-id=/game-dev/part-i/introduction/ title=Introduction class=dd-item><a href=/game-dev/part-i/introduction/>Introduction</a></li>
<li data-nav-id=/game-dev/part-i/draganddrop/ title="Drag And Drop" class="dd-item active"><a href=/game-dev/part-i/draganddrop/>Drag And Drop</a></li>
<li data-nav-id=/game-dev/part-i/towers/ title="Rotating Towers" class=dd-item><a href=/game-dev/part-i/towers/>Rotating Towers</a></li>
<li data-nav-id=/game-dev/part-i/pathforballoons/ title="Path For Balloons" class=dd-item><a href=/game-dev/part-i/pathforballoons/>Path For Balloons</a></li>
<li data-nav-id=/game-dev/part-i/updatingballoons/ title="Balloon Waves" class=dd-item><a href=/game-dev/part-i/updatingballoons/>Balloon Waves</a></li>
<li data-nav-id=/game-dev/part-i/healthchecking/ title="Health Bar" class=dd-item><a href=/game-dev/part-i/healthchecking/>Health Bar</a></li>
<li data-nav-id=/game-dev/part-i/towervaliditychecking/ title="Tower Validity Checking" class=dd-item><a href=/game-dev/part-i/towervaliditychecking/>Tower Validity Checking</a></li></ul></li>
<li data-nav-id=/game-dev/part-ii/ title="Part II" class="dd-item alwaysopen"><a href=/game-dev/part-ii/><b>2.</b> Part II</a><ul></ul></li>
<li data-nav-id=/game-dev/part-iii/ title="Part III" class="dd-item alwaysopen"><a href=/game-dev/part-iii/><b>3.</b> Part III</a><ul></ul></li></ul></li>
<li data-nav-id=/game-jam/ title="Game Jam" class=dd-item><a href=/game-jam/>Game Jam</a><ul></ul></li>
<li data-nav-id=/lyon-hacks/ title=LyonHacks class=dd-item><a href=/lyon-hacks/>LyonHacks</a><ul>
<li data-nav-id=/lyon-hacks/season-i/ title="Season I" class="dd-item alwaysopen"><a href=/lyon-hacks/season-i/>Season I</a><ul></ul></li>
<li data-nav-id=/lyon-hacks/season-ii/ title="Season II" class="dd-item alwaysopen"><a href=/lyon-hacks/season-ii/>Season II</a><ul></ul></li></ul></li>
<li data-nav-id=/mentorship/ title=Mentorship class=dd-item><a href=/mentorship/>Mentorship</a><ul></ul></li>
</ul>
<div id=footer><a href=https://mcpt.ca/>
<p>
<object type=image/svg+xml data=/img/footer-icon.svg></object>
mcpt.ca
</p>
</a>
<a href=https://github.com/mcpt/learning><p><i class="fab fa-github-alt"></i> source</p></a>
</div>
</div>
</nav>
<div id=body>
<div id=overlay></div>
<div class="padding highlightable">
<div id=top-bar>
<div id=breadcrumbs>
<span id=sidebar-toggle-span>
<a href=# id=sidebar-toggle data-sidebar-toggle>
<i class="fas fa-bars"></i>
</a>
</span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span>
<ol class=links itemscope itemtype=http://schema.org/BreadcrumbList>
<meta itemprop=itemListOrder content="Descending">
<li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="4"><a itemprop=item href=/><span itemprop=name>Home</span></a> > </li>
<li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3"><a itemprop=item href=/game-dev/><span itemprop=name>Game Series</span></a> > </li>
<li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="2"><a itemprop=item href=/game-dev/part-i/><span itemprop=name>Part I</span></a> > </li>
<li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="1"><a itemprop=item href=/game-dev/part-i/draganddrop/ aria-disabled=true><span itemprop=name>Drag And Drop</span></a></li>
</ol>
</div>
<div class=progress>
<div class=wrapper>
<nav id=TableOfContents>
<ul>
<li><a href=#graphic-interface>Graphic Interface</a></li>
<li><a href=#picking-up-towers>Picking Up Towers</a></li>
<li><a href=#dropping-towers>Dropping Towers</a></li>
<li><a href=#displaying-towers>Displaying Towers</a></li>
</ul>
</nav>
</div>
</div>
</div>
<div id=head-tags>
</div>
<main id=body-inner>
<h1>Drag And Drop</h1>
<hr>
<div class="attachments green">
<div class=label>Drag and Drop Template</div>
<ul class=attachments-files>
<li><a href=/game-dev/part-i/draganddrop.files/DragAndDropTemplate.zip>DragAndDropTemplate.zip</a> (2 KB)</li>
</ul>
</div>
<h2 id=graphic-interface>Graphic Interface</h2>
<p>The drag and drop interface for this game contains a pick up region for the user to pick up towers and a trash box for the user to cancel the pick-up. To pick up a tower, simply click within the light-green pick-up box, drag the tower to a valid position on the field, and release the mouse key. Notice that it will not allow you to place the towers directly on the balloon path. If you decide to change your mind about picking up the tower, just drop it in the trash bin, the dark green rectangle around the pick-up box.</p>
<p><img src=/img/Interface-Demo.png alt=Interface></p>
<h2 id=picking-up-towers>Picking Up Towers</h2>
<p>To detect when a tower is being picked up, we will use Processing’s built-in <code>mousePressed()</code> method, which is called by the system whenever the computer detects that the left mouse button has been pressed down. In order to determine if the user is actually picking up the tower rather than clicking somewhere else on the screen, we will use a method to check if the mouse coordinates are within the pick-up box. It will use &ldquo;point to rectangle collision&rdquo; to check if the mouse is within bounds. If both the x distance and the y distance of the mouse from the centre are not greater than half the length of the square, it would be within bounds. See the image and code sample below for reference.</p>
<p><img src=/img/Square-Point-Collision.png alt=Collision></p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=color:#75715e>// Use point to rectangle collision detection to check for mouse being within bounds of pick-up box
</span><span style=color:#75715e></span><span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>pointRectCollision</span><span style=color:#f92672>(</span><span style=color:#66d9ef>float</span> x1<span style=color:#f92672>,</span> <span style=color:#66d9ef>float</span> y1<span style=color:#f92672>,</span> <span style=color:#66d9ef>float</span> x2<span style=color:#f92672>,</span> <span style=color:#66d9ef>float</span> y2<span style=color:#f92672>,</span> <span style=color:#66d9ef>float</span> size<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
  <span style=color:#75715e>//            --X Distance--               --Y Distance--
</span><span style=color:#75715e></span>  <span style=color:#66d9ef>return</span> <span style=color:#f92672>(</span>abs<span style=color:#f92672>(</span>x2 <span style=color:#f92672>-</span> x1<span style=color:#f92672>)</span> <span style=color:#f92672>&lt;=</span> size <span style=color:#f92672>/</span> 2<span style=color:#f92672>)</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#f92672>(</span>abs<span style=color:#f92672>(</span>y2 <span style=color:#f92672>-</span> y1<span style=color:#f92672>)</span> <span style=color:#f92672>&lt;=</span> size <span style=color:#f92672>/</span> 2<span style=color:#f92672>);</span>
<span style=color:#f92672>}</span>
</code></pre></div><h2 id=dropping-towers>Dropping Towers</h2>
<p>Now, how do we determine when the user has dropped the tower? Processing has a built-in <code>mouseReleased()</code> method which is called by the system whenever the user releases the mouse key. If the user was holding a tower when the <code>mouseReleased()</code> method is called, then the user has just dropped the tower, and we should handle the drop accordingly.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=color:#75715e>// Called by the system whenever the left mouse button is released by the user
</span><span style=color:#75715e></span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>mouseReleased</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
  <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>within<span style=color:#f92672>)</span> <span style=color:#f92672>{</span> <span style=color:#75715e>// If the user was holding the tower in the previous frame, the tower has just been dropped
</span><span style=color:#75715e></span>    handleDrop<span style=color:#f92672>();</span> <span style=color:#75715e>// Call the method to handle the drop and check for drop validity
</span><span style=color:#75715e></span>  <span style=color:#f92672>}</span>

  within <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>;</span> <span style=color:#75715e>// The mouse is no longer holding the tower
</span><span style=color:#75715e></span><span style=color:#f92672>}</span>
</code></pre></div><p>The <code>handleDrop()</code> method will check if the tower is either in a valid dropping position on the field, in an invalid dropping position, or in the trash box, which is the dark-green rectangle surrounding the pick-up region that cancels a tower pick-up. In order to see if it is in the trash box, we make sure that the x and y coordinates of the tower is within the set bounds of the trash box. If the tower is in a valid position on the field, we will add this tower to a list of placed-down towers (explained below). Checking validity of tower placements is explained <a href=/game-dev/part-i/towervaliditychecking/>here</a></p>
<h2 id=displaying-towers>Displaying Towers</h2>
<p>In order to keep track of all the towers that have been placed down, we need to use an <code>ArrayList</code>.</p>
<div class="notices info">
<div class=label>ArrayLists and PVectors</div><p><code>ArrayList</code> is a built-in feature in Processing and Java that is similar to an array. It stores a sequence of values or elements in a list-like fashion. They have the same functionality as an array, with an additional feature of inserting a new element into the ArrayList at any time. Check out <a href=/game-dev/part-i/pathforballoons/#arraylists>balloon paths</a> for a more detailed explanation or the <a href=https://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html>official documentation</a></p>
<p><code>PVector</code> is a simple data type that stores two numbers and represents an (x, y) coordinate. Official documentation can be found <a href=https://processing.org/reference/PVector.html>here</a></p>
</div>
<p>We will be using an ArrayList of <code>PVector</code> to store the coordinates of every tower that has been placed down. Whenever a tower is dropped in a valid position, we will add that tower’s coordinates to the ArrayList.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=color:#75715e>// List of all towers that have been placed down
</span><span style=color:#75715e></span>ArrayList<span style=color:#f92672>&lt;</span>PVector<span style=color:#f92672>&gt;</span> towers<span style=color:#f92672>;</span>

<span style=color:#75715e>// Adding the location of a new tower to the list of placed-down towers
</span><span style=color:#75715e></span>towers<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> PVector<span style=color:#f92672>(</span>x<span style=color:#f92672>,</span> y<span style=color:#f92672>));</span>
</code></pre></div><p>To help with displaying towers, we declared a helper method <code>drawTowerIcon()</code> that takes in the basic parameters of the tower that we would like to draw, and draws it onto the canvas.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=color:#75715e>// Draw a simple tower at a specified location
</span><span style=color:#75715e></span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>drawTowerIcon</span><span style=color:#f92672>(</span><span style=color:#66d9ef>float</span> xPos<span style=color:#f92672>,</span> <span style=color:#66d9ef>float</span> yPos<span style=color:#f92672>,</span> color colour<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
  strokeWeight<span style=color:#f92672>(</span>0<span style=color:#f92672>);</span>
  stroke<span style=color:#f92672>(</span>0<span style=color:#f92672>);</span>
  fill<span style=color:#f92672>(</span>colour<span style=color:#f92672>);</span>
  rectMode<span style=color:#f92672>(</span>CENTER<span style=color:#f92672>);</span>
  rect<span style=color:#f92672>(</span>xPos<span style=color:#f92672>,</span> yPos<span style=color:#f92672>,</span> towerSize<span style=color:#f92672>,</span> towerSize<span style=color:#f92672>);</span> <span style=color:#75715e>// Draw a simple rectangle as the tower
</span><span style=color:#75715e></span><span style=color:#f92672>}</span>
</code></pre></div><p>At each call of the <code>draw()</code> function, we will redraw all the placed-down towers whose coordinates are stored in the ArrayList. To do so, we will access each element of our tower ArrayList using a <code>for</code> loop and call the <code>drawTowerIcon()</code> to draw each tower in its respective position.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=color:#75715e>// Redraws all the towers that have been placed down
</span><span style=color:#75715e></span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>drawAllTowers</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
  <span style=color:#75715e>// Loop through the ArrayList that stores the locations of towers that were placed down
</span><span style=color:#75715e></span>  <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> towers<span style=color:#f92672>.</span><span style=color:#a6e22e>size</span><span style=color:#f92672>();</span> i<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>float</span> xPos <span style=color:#f92672>=</span> towers<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>i<span style=color:#f92672>).</span><span style=color:#a6e22e>x</span><span style=color:#f92672>,</span> yPos <span style=color:#f92672>=</span> towers<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>i<span style=color:#f92672>).</span><span style=color:#a6e22e>y</span><span style=color:#f92672>;</span> <span style=color:#75715e>// Get the location of the tower from the ArrayList
</span><span style=color:#75715e></span>
    <span style=color:#75715e>// Draw the tower at the specified location
</span><span style=color:#75715e></span>    drawTowerIcon<span style=color:#f92672>(</span>xPos<span style=color:#f92672>,</span> yPos<span style=color:#f92672>,</span> towerColour<span style=color:#f92672>,</span> <span style=color:#66d9ef>new</span> PVector<span style=color:#f92672>(</span>mouseX<span style=color:#f92672>,</span> mouseY<span style=color:#f92672>));</span>

    fill<span style=color:#f92672>(</span><span style=color:#960050;background-color:#1e0010>#</span>4C6710<span style=color:#f92672>);</span> <span style=color:#75715e>// Set the fill colour for text
</span><span style=color:#75715e></span>    text<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Tower &#34;</span> <span style=color:#f92672>+</span> <span style=color:#f92672>(</span>i<span style=color:#f92672>+</span>1<span style=color:#f92672>),</span> xPos <span style=color:#f92672>-</span> 30<span style=color:#f92672>,</span> yPos <span style=color:#f92672>-</span> 20<span style=color:#f92672>);</span> <span style=color:#75715e>// Write the tower number label
</span><span style=color:#75715e></span>  <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div>
<footer class=footline>
</footer>
</main>
</div>
<div id=navigation>
<a class="nav nav-prev" href=/game-dev/part-i/introduction/ title=Introduction><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=/game-dev/part-i/towers/ title="Rotating Towers"><i class="fa fa-chevron-right"></i></a>
</div>
</div>
<div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px>
<div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div>
</div>
<script src=/js/clipboard.min.js?1636776356></script>
<script src=/js/perfect-scrollbar.min.js?1636776356></script>
<script src=/js/perfect-scrollbar.jquery.min.js?1636776356></script>
<script src=/js/jquery.svg.pan.zoom.js?1636776356></script>
<script src=/js/featherlight.min.js?1636776356></script>
<script src=/js/modernizr.custom-3.6.0.js?1636776356></script>
<script src=/js/mermaid.min.js?1636776356></script>
<script>typeof mermaid!='undefined'&&mermaid.mermaidAPI.initialize(Object.assign({securityLevel:"antiscript"},JSON.parse('{ "startOnLoad": true }'),{startOnLoad:!1}))</script>
<script src=/js/relearn.js?1636776356></script>
</body>
</html>