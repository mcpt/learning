<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.109.0"><meta name=generator content="Relearn 2.9.2
"><meta name=description content><title>Tetris :: MCPT Learning Resources</title><link href=/css/nucleus.css?1672077480 rel=stylesheet><link href=/css/fontawesome-all.min.css?1672077480 rel=stylesheet><link href=/css/featherlight.min.css?1672077480 rel=stylesheet><link href=/css/perfect-scrollbar.min.css?1672077480 rel=stylesheet><link href=/css/auto-complete.css?1672077480 rel=stylesheet><link href=/css/theme.css?1672077480 rel=stylesheet><link href=/css/theme-mcpt.css?1672077480 rel=stylesheet><link href=/css/variant.css?1672077480 rel=stylesheet><link href=/css/print.css?1672077480 rel=stylesheet media=print><link href=/css/p5js.css?1672077480 rel=stylesheet><link href=/css/sidebar.css?1672077480 rel=stylesheet><script src=/js/jquery.min.js?1672077480></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style><script src=/js/p5.min.js></script></head><body data-url=/learning-2021/game-jam/tetris-workshop/tetris/><script>var index_url="/index.json",root_url="/",baseUri=root_url.replace(/\/$/,"")</script><nav id=sidebar><div id=header-wrapper><div id=header><a href=/><img src=https://mcpt.ca/static/icons/logo.png><br><span class=subheading>LEARNING</span></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script src=/js/lunr.min.js?1672077480></script>
<script src=/js/auto-complete.js?1672077480></script>
<script src=/js/search.js?1672077480></script></div><div id=homelinks><ul><li><a class=padding href=/><i class="fas fa-home"></i> Home</a></li></ul></div><div class=highlightable><ul class=topics><li data-nav-id=/learning-2021/ title="Learning 2021" class="dd-item parent"><a href=/learning-2021/>Learning 2021</a><ul><li data-nav-id=/learning-2021/game-dev/ title="Game Series" class="dd-item alwaysopen"><a href=/learning-2021/game-dev/>Game Series</a><ul><li data-nav-id=/learning-2021/game-dev/leaderboard/ title=Leaderboard class=dd-item><a href=/learning-2021/game-dev/leaderboard/>Leaderboard</a></li><li data-nav-id=/learning-2021/game-dev/part-i/ title="Part I" class=dd-item><a href=/learning-2021/game-dev/part-i/><b>1.</b> Part I</a><ul><li data-nav-id=/learning-2021/game-dev/part-i/introduction/ title=Introduction class=dd-item><a href=/learning-2021/game-dev/part-i/introduction/>Introduction</a></li><li data-nav-id=/learning-2021/game-dev/part-i/draganddrop/ title="Drag And Drop" class=dd-item><a href=/learning-2021/game-dev/part-i/draganddrop/>Drag And Drop</a></li><li data-nav-id=/learning-2021/game-dev/part-i/towers/ title="Rotating Towers" class=dd-item><a href=/learning-2021/game-dev/part-i/towers/>Rotating Towers</a></li><li data-nav-id=/learning-2021/game-dev/part-i/pathforballoons/ title="Path For Balloons" class=dd-item><a href=/learning-2021/game-dev/part-i/pathforballoons/>Path For Balloons</a></li><li data-nav-id=/learning-2021/game-dev/part-i/challenge/ title="Challenge: Movement" class=dd-item><a href=/learning-2021/game-dev/part-i/challenge/>Challenge: Movement</a></li><li data-nav-id=/learning-2021/game-dev/part-i/updatingballoons/ title="Balloon Waves" class=dd-item><a href=/learning-2021/game-dev/part-i/updatingballoons/>Balloon Waves</a></li><li data-nav-id=/learning-2021/game-dev/part-i/healthchecking/ title="Health Bar" class=dd-item><a href=/learning-2021/game-dev/part-i/healthchecking/>Health Bar</a></li><li data-nav-id=/learning-2021/game-dev/part-i/towervaliditychecking/ title="Tower Validity Checking" class=dd-item><a href=/learning-2021/game-dev/part-i/towervaliditychecking/>Tower Validity Checking</a></li></ul></li><li data-nav-id=/learning-2021/game-dev/part-ii/ title="Part II" class=dd-item><a href=/learning-2021/game-dev/part-ii/><b>2.</b> Part II</a><ul><li data-nav-id=/learning-2021/game-dev/part-ii/introduction/ title=Introduction class=dd-item><a href=/learning-2021/game-dev/part-ii/introduction/>Introduction</a></li><li data-nav-id=/learning-2021/game-dev/part-ii/advancedtracking/ title="Advanced Tracking" class=dd-item><a href=/learning-2021/game-dev/part-ii/advancedtracking/>Advanced Tracking</a></li><li data-nav-id=/learning-2021/game-dev/part-ii/currency/ title="Currency System" class=dd-item><a href=/learning-2021/game-dev/part-ii/currency/>Currency System</a></li><li data-nav-id=/learning-2021/game-dev/part-ii/newtower/ title="New Towers" class=dd-item><a href=/learning-2021/game-dev/part-ii/newtower/>New Towers</a></li><li data-nav-id=/learning-2021/game-dev/part-ii/projectiles/ title=Projectiles class=dd-item><a href=/learning-2021/game-dev/part-ii/projectiles/>Projectiles</a></li></ul></li><li data-nav-id=/learning-2021/game-dev/part-iii/ title="Part III" class=dd-item><a href=/learning-2021/game-dev/part-iii/><b>3.</b> Part III</a><ul><li data-nav-id=/learning-2021/game-dev/part-iii/introduction/ title=Introduction class=dd-item><a href=/learning-2021/game-dev/part-iii/introduction/>Introduction</a></li><li data-nav-id=/learning-2021/game-dev/part-iii/currency/ title="More Currency" class=dd-item><a href=/learning-2021/game-dev/part-iii/currency/>More Currency</a></li><li data-nav-id=/learning-2021/game-dev/part-iii/upgrades/ title="Tower Upgrades" class=dd-item><a href=/learning-2021/game-dev/part-iii/upgrades/>Tower Upgrades</a></li><li data-nav-id=/learning-2021/game-dev/part-iii/userinterface/ title="User Interface" class=dd-item><a href=/learning-2021/game-dev/part-iii/userinterface/>User Interface</a></li><li data-nav-id=/learning-2021/game-dev/part-iii/makinglevels/ title="Making Levels" class=dd-item><a href=/learning-2021/game-dev/part-iii/makinglevels/>Making Levels</a></li><li data-nav-id=/learning-2021/game-dev/part-iii/pathcreationapi/ title="Path Creation API" class=dd-item><a href=/learning-2021/game-dev/part-iii/pathcreationapi/>Path Creation API</a></li><li data-nav-id=/learning-2021/game-dev/part-iii/powerups/ title=Powerups class=dd-item><a href=/learning-2021/game-dev/part-iii/powerups/>Powerups</a></li><li data-nav-id=/learning-2021/game-dev/part-iii/challenge/ title=Challenges class=dd-item><a href=/learning-2021/game-dev/part-iii/challenge/>Challenges</a></li></ul></li></ul></li><li data-nav-id=/learning-2021/game-jam/ title="Game Jam" class="dd-item parent alwaysopen"><a href=/learning-2021/game-jam/>Game Jam</a><ul><li data-nav-id=/learning-2021/game-jam/leaderboard/ title=Leaderboard class=dd-item><a href=/learning-2021/game-jam/leaderboard/>Leaderboard</a></li><li data-nav-id=/learning-2021/game-jam/tetris-workshop/ title="Tetris Workshop" class="dd-item parent"><a href=/learning-2021/game-jam/tetris-workshop/>Tetris Workshop</a><ul><li data-nav-id=/learning-2021/game-jam/tetris-workshop/object-oriented-programming/ title="Object Oriented Programming" class=dd-item><a href=/learning-2021/game-jam/tetris-workshop/object-oriented-programming/>Object Oriented Programming</a></li><li data-nav-id=/learning-2021/game-jam/tetris-workshop/multi-dimensional-arrays/ title="Multi-Dimensional Arrays" class=dd-item><a href=/learning-2021/game-jam/tetris-workshop/multi-dimensional-arrays/>Multi-Dimensional Arrays</a></li><li data-nav-id=/learning-2021/game-jam/tetris-workshop/threads/ title=Multi-Threading class=dd-item><a href=/learning-2021/game-jam/tetris-workshop/threads/>Multi-Threading</a></li><li data-nav-id=/learning-2021/game-jam/tetris-workshop/tetris/ title=Tetris class="dd-item active"><a href=/learning-2021/game-jam/tetris-workshop/tetris/>Tetris</a></li></ul></li><li data-nav-id=/learning-2021/game-jam/jumpingphysics/ title="Jumping Physics Workshop" class=dd-item><a href=/learning-2021/game-jam/jumpingphysics/>Jumping Physics Workshop</a><ul><li data-nav-id=/learning-2021/game-jam/jumpingphysics/collisions/ title=Collisions class=dd-item><a href=/learning-2021/game-jam/jumpingphysics/collisions/>Collisions</a></li><li data-nav-id=/learning-2021/game-jam/jumpingphysics/jumpingphysics/ title="Jumping Physics" class=dd-item><a href=/learning-2021/game-jam/jumpingphysics/jumpingphysics/>Jumping Physics</a></li></ul></li><li data-nav-id=/learning-2021/game-jam/resources/ title=Resources class=dd-item><a href=/learning-2021/game-jam/resources/>Resources</a><ul><li data-nav-id=/learning-2021/game-jam/resources/github/ title="A Github Crash Course" class="dd-item alwaysopen"><a href=/learning-2021/game-jam/resources/github/>A Github Crash Course</a><ul></ul></li><li data-nav-id=/learning-2021/game-jam/resources/devpost-info/ title="Devpost Information" class="dd-item alwaysopen"><a href=/learning-2021/game-jam/resources/devpost-info/>Devpost Information</a><ul></ul></li><li data-nav-id=/learning-2021/game-jam/resources/tips/ title="Tips & Tricks" class="dd-item alwaysopen"><a href=/learning-2021/game-jam/resources/tips/>Tips & Tricks</a><ul></ul></li><li data-nav-id=/learning-2021/game-jam/resources/pitch/ title="Pitch Creation" class="dd-item alwaysopen"><a href=/learning-2021/game-jam/resources/pitch/>Pitch Creation</a><ul></ul></li></ul></li></ul></li><li data-nav-id=/learning-2021/lyon-hacks/ title=LyonHacks class="dd-item alwaysopen"><a href=/learning-2021/lyon-hacks/>LyonHacks</a><ul><li data-nav-id=/learning-2021/lyon-hacks/season-ii/ title="LyonHacks Season II" class="dd-item alwaysopen"><a href=/learning-2021/lyon-hacks/season-ii/>LyonHacks Season II</a><ul></ul></li><li data-nav-id=/learning-2021/lyon-hacks/legacy/ title="Legacy Events" class=dd-item><a href=/learning-2021/lyon-hacks/legacy/>Legacy Events</a><ul><li data-nav-id=/learning-2021/lyon-hacks/legacy/season-i/ title="Season I" class=dd-item><a href=/learning-2021/lyon-hacks/legacy/season-i/>Season I</a></li></ul></li></ul></li></ul></li><li data-nav-id=/learning-2022/ title="Learning 2022" class=dd-item><a href=/learning-2022/>Learning 2022</a><ul><li data-nav-id=/learning-2022/holiday-game-jam-ii/ title="Holiday Game Jam II " class="dd-item alwaysopen"><a href=/learning-2022/holiday-game-jam-ii/>Holiday Game Jam II</a><ul><li data-nav-id=/learning-2022/holiday-game-jam-ii/resources/ title="Game Jam Resource Page" class="dd-item alwaysopen"><a href=/learning-2022/holiday-game-jam-ii/resources/>Game Jam Resource Page</a><ul><li data-nav-id=/learning-2022/holiday-game-jam-ii/resources/devpost-help/ title="Devpost Information" class="dd-item alwaysopen"><a href=/learning-2022/holiday-game-jam-ii/resources/devpost-help/>Devpost Information</a><ul></ul></li><li data-nav-id=/learning-2022/holiday-game-jam-ii/resources/github-tutorial/ title="GitHub Tutorial" class="dd-item alwaysopen"><a href=/learning-2022/holiday-game-jam-ii/resources/github-tutorial/>GitHub Tutorial</a><ul></ul></li></ul></li></ul></li><li data-nav-id=/learning-2022/web-development-workshop/ title="Web Dev Workshop" class="dd-item alwaysopen"><a href=/learning-2022/web-development-workshop/>Web Dev Workshop</a><ul><li data-nav-id=/learning-2022/web-development-workshop/running-html-files/ title="Opening HTML Files in Your Browser" class="dd-item alwaysopen"><a href=/learning-2022/web-development-workshop/running-html-files/>Opening HTML Files in Your Browser</a><ul></ul></li><li data-nav-id=/learning-2022/web-development-workshop/editing-html-files/ title="Editing HTML Files" class="dd-item alwaysopen"><a href=/learning-2022/web-development-workshop/editing-html-files/>Editing HTML Files</a><ul></ul></li></ul></li></ul></li></ul><div id=footer><a href=https://mcpt.ca/><p><object type=image/svg+xml data=/img/footer-icon.svg></object>
mcpt.ca</p></a><a href=https://github.com/mcpt/learning><p><i class="fab fa-github-alt"></i> source</p></a></div></div></nav><div id=body><div id=overlay></div><div class="padding highlightable"><div id=top-bar><div id=breadcrumbs><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="5"><a itemprop=item href=/><span itemprop=name>Home</span></a> ></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="4"><a itemprop=item href=/learning-2021/><span itemprop=name>Learning 2021</span></a> ></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3"><a itemprop=item href=/learning-2021/game-jam/><span itemprop=name>Game Jam</span></a> ></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="2"><a itemprop=item href=/learning-2021/game-jam/tetris-workshop/><span itemprop=name>Tetris Workshop</span></a> ></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="1"><a itemprop=item href=/learning-2021/game-jam/tetris-workshop/tetris/ aria-disabled=true><span itemprop=name>Tetris</span></a></li></ol></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><ul><li><a href=#game-grid>Game Grid</a></li><li><a href=#tetromino-logic-and-implementation>Tetromino Logic and Implementation</a></li><li><a href=#multiple-threads-for-block-movement>Multiple Threads for Block Movement</a></li></ul></li></ul></nav></div></div></div><div id=head-tags></div><main id=body-inner><h1>Tetris</h1><hr><p>Let&rsquo;s now relate everything back to implementing Tetris. There are a few main concepts that a Tetris game needs:</p><ul><li>Game Grid (landed array)</li><li>Representation of our tetrominoes with OOP and multi-dimensional arrays</li><li>Using multiple threads to detect inputs and bring down blocks at the same time</li></ul><p>Let&rsquo;s look at each part separately and see how we can apply the knowledge we&rsquo;ve learned to create each part.</p><h3 id=game-grid>Game Grid</h3><p>In Tetris, we have a two dimensional grid that represents our game grid. The standard is a 10x20 board, using each block as a unit, but we can make the board any size we want.</p><p><img src=/img/gridexample.png alt=Grid></p><p>To represent this grid, we can use a 2D array of integers, where the value at each cell represents if there is a block there or not. Here is what it would look like:</p><p><img src=/img/landedarrayexample.png alt="Landed Array"></p><p>Let&rsquo;s call this grid a &ldquo;landed array&rdquo;. This is because it will only store blocks that have already landed on our screen. We can also use different integers to represent different colors.</p><p><img src=/img/coloredlandedarrayexample.png alt="Colored Blocks"></p><p>Everytime we drop a block, we want the block to be added to this landed array according to its color.</p><h3 id=tetromino-logic-and-implementation>Tetromino Logic and Implementation</h3><p>In Tetris, we call each block that is made of four squares &ldquo;tetrominoes&rdquo;. We can store each tetromino as a 2D array. Here is how it would look like:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=display:flex><span><span style=color:#66d9ef>int</span><span style=color:#f92672>[][]</span> tetromino <span style=color:#f92672>=</span> <span style=color:#f92672>{{</span><span style=color:#ae81ff>0</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>                     <span style=color:#f92672>{</span><span style=color:#ae81ff>0</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>                     <span style=color:#f92672>{</span><span style=color:#ae81ff>1</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>}};</span>
</span></span><span style=display:flex><span><span style=color:#75715e>//this represents the j block tetris piece shown below
</span></span></span></code></pre></div><p><img src=/img/jblockexample.png alt="J Block"></p><p>To make life easier, we want to store all of the rotations of our block in an array. Recall thata 3D array is an array of 2D arrays. This means that we can use a 3D array to store all the rotations.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>int</span><span style=color:#f92672>[][][]</span> rotations <span style=color:#f92672>=</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span><span style=color:#ae81ff>0</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span><span style=color:#ae81ff>0</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span><span style=color:#ae81ff>1</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span><span style=color:#ae81ff>1</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span><span style=color:#ae81ff>1</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span><span style=color:#ae81ff>1</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span><span style=color:#ae81ff>1</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span><span style=color:#ae81ff>1</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span><span style=color:#ae81ff>1</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span><span style=color:#ae81ff>0</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>},</span>                        
</span></span><span style=display:flex><span><span style=color:#f92672>};</span>
</span></span></code></pre></div><p>We can now use Object Oriented Programming to make our lives a lot easeir. Let&rsquo;s create a Tetromino class with attributes for rotations, current rotation, width and height. The rotations would store all the rotations of our Tetromino. The current rotation represents the rotation we are on from an index of 0-3. The width and height would represent our current rotation&rsquo;s width and height. We can make an array of our Tetromino class, storing the 7 types of tetrominoes.</p><div class=expand><a class=expand-label onclick='$t=$(this),$t.parent(".expand-expanded.expand-marked").length?$t.next().css("display","none"):$t.parent(".expand-marked").length?$t.next().css("display","block"):$t.next(".expand-content").slideToggle(100),$t.parent().toggleClass("expand-expanded")'><i class="fas fa-chevron-down"></i>
<i class="fas fa-chevron-right"></i>
See Tetromino code</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>//note that for simplicity, we create 4 rotations for every block, even though some of the blocks look the same after some rotations
</span></span></span><span style=display:flex><span><span style=color:#75715e></span> <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>fillTetrominos</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>//I block
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    tets<span style=color:#f92672>[</span><span style=color:#ae81ff>0</span><span style=color:#f92672>]</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Tetromino<span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>[][][]</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{{</span><span style=color:#ae81ff>2</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>2</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>2</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>2</span><span style=color:#f92672>}},</span>
</span></span><span style=display:flex><span>          
</span></span><span style=display:flex><span>            <span style=color:#f92672>{{</span><span style=color:#ae81ff>2</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>{</span><span style=color:#ae81ff>2</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>{</span><span style=color:#ae81ff>2</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>{</span><span style=color:#ae81ff>2</span><span style=color:#f92672>}},</span>
</span></span><span style=display:flex><span>       
</span></span><span style=display:flex><span>        <span style=color:#f92672>{{</span><span style=color:#ae81ff>2</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>2</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>2</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>2</span><span style=color:#f92672>}},</span>
</span></span><span style=display:flex><span>       
</span></span><span style=display:flex><span>            <span style=color:#f92672>{{</span><span style=color:#ae81ff>2</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>{</span><span style=color:#ae81ff>2</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>{</span><span style=color:#ae81ff>2</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>{</span><span style=color:#ae81ff>2</span><span style=color:#f92672>}}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>});</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>//J block
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    tets<span style=color:#f92672>[</span><span style=color:#ae81ff>1</span><span style=color:#f92672>]</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Tetromino<span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>[][][]</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{{</span><span style=color:#ae81ff>1</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>},</span> 
</span></span><span style=display:flex><span>         <span style=color:#f92672>{</span><span style=color:#ae81ff>0</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>}},</span>
</span></span><span style=display:flex><span>       
</span></span><span style=display:flex><span>        <span style=color:#f92672>{{</span><span style=color:#ae81ff>0</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>{</span><span style=color:#ae81ff>0</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>{</span><span style=color:#ae81ff>1</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>}},</span>
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#f92672>{{</span><span style=color:#ae81ff>1</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>},</span> 
</span></span><span style=display:flex><span>         <span style=color:#f92672>{</span><span style=color:#ae81ff>1</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>}},</span>
</span></span><span style=display:flex><span>       
</span></span><span style=display:flex><span>        <span style=color:#f92672>{{</span><span style=color:#ae81ff>1</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>{</span><span style=color:#ae81ff>1</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>{</span><span style=color:#ae81ff>1</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>}}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>});</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>//L block
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    tets<span style=color:#f92672>[</span><span style=color:#ae81ff>2</span><span style=color:#f92672>]</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Tetromino<span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>[][][]</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{{</span><span style=color:#ae81ff>4</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>4</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>4</span><span style=color:#f92672>},</span> 
</span></span><span style=display:flex><span>         <span style=color:#f92672>{</span><span style=color:#ae81ff>4</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>}},</span>
</span></span><span style=display:flex><span>       
</span></span><span style=display:flex><span>        <span style=color:#f92672>{{</span><span style=color:#ae81ff>4</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>4</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>{</span><span style=color:#ae81ff>0</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>4</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>{</span><span style=color:#ae81ff>0</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>4</span><span style=color:#f92672>}},</span>
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#f92672>{{</span><span style=color:#ae81ff>0</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>4</span><span style=color:#f92672>},</span> 
</span></span><span style=display:flex><span>         <span style=color:#f92672>{</span><span style=color:#ae81ff>4</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>4</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>4</span><span style=color:#f92672>}},</span>
</span></span><span style=display:flex><span>       
</span></span><span style=display:flex><span>        <span style=color:#f92672>{{</span><span style=color:#ae81ff>4</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>{</span><span style=color:#ae81ff>4</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>{</span><span style=color:#ae81ff>4</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>4</span><span style=color:#f92672>}}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>});</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>//O block
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    tets<span style=color:#f92672>[</span><span style=color:#ae81ff>3</span><span style=color:#f92672>]</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Tetromino<span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>[][][]</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{{</span><span style=color:#ae81ff>7</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>7</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>{</span><span style=color:#ae81ff>7</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>7</span><span style=color:#f92672>}},</span>
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#f92672>{{</span><span style=color:#ae81ff>7</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>7</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>{</span><span style=color:#ae81ff>7</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>7</span><span style=color:#f92672>}},</span>
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#f92672>{{</span><span style=color:#ae81ff>7</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>7</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>{</span><span style=color:#ae81ff>7</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>7</span><span style=color:#f92672>}},</span>
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#f92672>{{</span><span style=color:#ae81ff>7</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>7</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>{</span><span style=color:#ae81ff>7</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>7</span><span style=color:#f92672>}}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>});</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>//S block
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    tets<span style=color:#f92672>[</span><span style=color:#ae81ff>4</span><span style=color:#f92672>]</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Tetromino<span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>[][][]</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{{</span><span style=color:#ae81ff>0</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>3</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>3</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>{</span><span style=color:#ae81ff>3</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>3</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>}},</span>
</span></span><span style=display:flex><span>       
</span></span><span style=display:flex><span>        <span style=color:#f92672>{{</span><span style=color:#ae81ff>3</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>{</span><span style=color:#ae81ff>3</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>3</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>{</span><span style=color:#ae81ff>0</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>3</span><span style=color:#f92672>}},</span>
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#f92672>{{</span><span style=color:#ae81ff>0</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>3</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>3</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>{</span><span style=color:#ae81ff>3</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>3</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>}},</span>
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#f92672>{{</span><span style=color:#ae81ff>3</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>{</span><span style=color:#ae81ff>3</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>3</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>{</span><span style=color:#ae81ff>0</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>3</span><span style=color:#f92672>}}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>});</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>//T block
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    tets<span style=color:#f92672>[</span><span style=color:#ae81ff>5</span><span style=color:#f92672>]</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Tetromino<span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>[][][]</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{{</span><span style=color:#ae81ff>0</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>5</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>{</span><span style=color:#ae81ff>5</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>5</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>5</span><span style=color:#f92672>}},</span>
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#f92672>{{</span><span style=color:#ae81ff>5</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>{</span><span style=color:#ae81ff>5</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>5</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>{</span><span style=color:#ae81ff>5</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>}},</span>
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#f92672>{{</span><span style=color:#ae81ff>5</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>5</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>5</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>{</span><span style=color:#ae81ff>0</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>5</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>}},</span>
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#f92672>{{</span><span style=color:#ae81ff>0</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>5</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>{</span><span style=color:#ae81ff>5</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>5</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>{</span><span style=color:#ae81ff>0</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>5</span><span style=color:#f92672>}}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>});</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>//Z block
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    tets<span style=color:#f92672>[</span><span style=color:#ae81ff>6</span><span style=color:#f92672>]</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Tetromino<span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>[][][]</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{{</span><span style=color:#ae81ff>6</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>6</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>{</span><span style=color:#ae81ff>0</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>6</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>6</span><span style=color:#f92672>}},</span>
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#f92672>{{</span><span style=color:#ae81ff>0</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>6</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>{</span><span style=color:#ae81ff>6</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>6</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>{</span><span style=color:#ae81ff>6</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>}},</span>
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#f92672>{{</span><span style=color:#ae81ff>6</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>6</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>{</span><span style=color:#ae81ff>0</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>6</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>6</span><span style=color:#f92672>}},</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{{</span><span style=color:#ae81ff>0</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>6</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>{</span><span style=color:#ae81ff>6</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>6</span><span style=color:#f92672>},</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>{</span><span style=color:#ae81ff>6</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>}}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>});</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div></div></div><p><img src=/img/tetrisrotationsexample.png alt=rotations></p><p>Now, we want to store the current block that is falling. We can store a current position with an <code>blockX</code> and <code>blockY</code>, and store the rest of the info with a Tetromino object. We can then use this object to determine how our block should function in the next segment.</p><h3 id=multiple-threads-for-block-movement>Multiple Threads for Block Movement</h3><p>We want to have at least two threads when making Tetris, one for detecting inputs for block movement and rotation and one to bring the block down every tick. If you want to implement a soft or hard drop function or a hold function, you will have to include it in the second thread.</p><p>For our first thread, we will just detect if left, right or up is pressed and will either move the current tetromino left, right or rotate it, respectively. This thread will do nothing else otherwise. When doing this, we will need to do checks if the block can go left, right or rotate. We don&rsquo;t want the block going out of bounds and breaking our game.</p><p>Our second thread will bring down our block every tick. A tick can be represented as whatever unit you want it to be, so we can just use half a second. If we want to bring down the block, we can press the down key to bring it down one unit every time. For hard drops, we can project what the block would look like underneath by using using a loop to check when it would hit the ground, and then draw white squares over the projected landing place. When you want to hard drop, just automatically insert the block into its projected location and create a new block using a random function, and reset its <code>blockX</code> and <code>blockY</code> values. For holding with our second thread, we want to check if the hold key is pressed, usually C. If it is pressed when it is empty, treat it like the block was hard dropped, where a new block is automatically generated. However, instead of a hard drop, we want to put it into a hold variable, of type Tetromino, which we can then swap in when you press C again. After our first initial hold, our hold variable will never be empty, so we want to swap out the block with our hold variable. Remember that we can only swap once every new block, so you will have to add an extra boolean variable that will check whether you have swapped in this turn.</p><p>Sometimes, threading might not work how you want to, so you can always separate the inputs for checking holds and drops into a third thread and leave automatic block movement in its own isolated thread.</p><p>If you would like to see the implementation for these two threads, refer to <code>KeyPress.java</code> and <code>MoveDown.java</code>.</p><footer class=footline></footer></main></div><div id=navigation><a class="nav nav-prev" href=/learning-2021/game-jam/tetris-workshop/threads/ title=Multi-Threading><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=/learning-2021/game-jam/jumpingphysics/ title="Jumping Physics Workshop"><i class="fa fa-chevron-right"></i></a></div></div><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js?1672077480></script>
<script src=/js/perfect-scrollbar.min.js?1672077480></script>
<script src=/js/perfect-scrollbar.jquery.min.js?1672077480></script>
<script src=/js/jquery.svg.pan.zoom.js?1672077480></script>
<script src=/js/featherlight.min.js?1672077480></script>
<script src=/js/modernizr.custom-3.6.0.js?1672077480></script>
<script src=/js/mermaid.min.js?1672077480></script>
<script>typeof mermaid!="undefined"&&typeof mermaid.mermaidAPI!="undefined"&&mermaid.mermaidAPI.initialize(Object.assign({securityLevel:"antiscript"},JSON.parse('{ "startOnLoad": true }'),{startOnLoad:!1}))</script><script src=/js/relearn.js?1672077480></script></body></html>