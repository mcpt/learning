<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.105.0"><meta name=generator content="Relearn 2.9.2
"><meta name=description content><title>Collisions :: MCPT Learning Resources</title><link href=/css/nucleus.css?1667491630 rel=stylesheet><link href=/css/fontawesome-all.min.css?1667491630 rel=stylesheet><link href=/css/featherlight.min.css?1667491630 rel=stylesheet><link href=/css/perfect-scrollbar.min.css?1667491630 rel=stylesheet><link href=/css/auto-complete.css?1667491630 rel=stylesheet><link href=/css/theme.css?1667491630 rel=stylesheet><link href=/css/theme-mcpt.css?1667491630 rel=stylesheet><link href=/css/variant.css?1667491630 rel=stylesheet><link href=/css/print.css?1667491630 rel=stylesheet media=print><link href=/css/p5js.css?1667491630 rel=stylesheet><link href=/css/sidebar.css?1667491630 rel=stylesheet><script src=/js/jquery.min.js?1667491630></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style><script src=/js/p5.min.js></script></head><body data-url=/learning-2021/game-jam/jumpingphysics/collisions/><script>var index_url="/index.json",root_url="/",baseUri=root_url.replace(/\/$/,"")</script><nav id=sidebar><div id=header-wrapper><div id=header><a href=/><img src=https://mcpt.ca/static/icons/logo.png><br><span class=subheading>LEARNING</span></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script src=/js/lunr.min.js?1667491630></script>
<script src=/js/auto-complete.js?1667491630></script>
<script src=/js/search.js?1667491630></script></div><div id=homelinks><ul><li><a class=padding href=/><i class="fas fa-home"></i> Home</a></li></ul></div><div class=highlightable><ul class=topics><li data-nav-id=/learning-2021/ title="Learning 2021" class="dd-item parent"><a href=/learning-2021/>Learning 2021</a><ul><li data-nav-id=/learning-2021/game-dev/ title="Game Series" class="dd-item alwaysopen"><a href=/learning-2021/game-dev/>Game Series</a><ul><li data-nav-id=/learning-2021/game-dev/leaderboard/ title=Leaderboard class=dd-item><a href=/learning-2021/game-dev/leaderboard/>Leaderboard</a></li><li data-nav-id=/learning-2021/game-dev/part-i/ title="Part I" class=dd-item><a href=/learning-2021/game-dev/part-i/><b>1.</b> Part I</a><ul><li data-nav-id=/learning-2021/game-dev/part-i/introduction/ title=Introduction class=dd-item><a href=/learning-2021/game-dev/part-i/introduction/>Introduction</a></li><li data-nav-id=/learning-2021/game-dev/part-i/draganddrop/ title="Drag And Drop" class=dd-item><a href=/learning-2021/game-dev/part-i/draganddrop/>Drag And Drop</a></li><li data-nav-id=/learning-2021/game-dev/part-i/towers/ title="Rotating Towers" class=dd-item><a href=/learning-2021/game-dev/part-i/towers/>Rotating Towers</a></li><li data-nav-id=/learning-2021/game-dev/part-i/pathforballoons/ title="Path For Balloons" class=dd-item><a href=/learning-2021/game-dev/part-i/pathforballoons/>Path For Balloons</a></li><li data-nav-id=/learning-2021/game-dev/part-i/challenge/ title="Challenge: Movement" class=dd-item><a href=/learning-2021/game-dev/part-i/challenge/>Challenge: Movement</a></li><li data-nav-id=/learning-2021/game-dev/part-i/updatingballoons/ title="Balloon Waves" class=dd-item><a href=/learning-2021/game-dev/part-i/updatingballoons/>Balloon Waves</a></li><li data-nav-id=/learning-2021/game-dev/part-i/healthchecking/ title="Health Bar" class=dd-item><a href=/learning-2021/game-dev/part-i/healthchecking/>Health Bar</a></li><li data-nav-id=/learning-2021/game-dev/part-i/towervaliditychecking/ title="Tower Validity Checking" class=dd-item><a href=/learning-2021/game-dev/part-i/towervaliditychecking/>Tower Validity Checking</a></li></ul></li><li data-nav-id=/learning-2021/game-dev/part-ii/ title="Part II" class=dd-item><a href=/learning-2021/game-dev/part-ii/><b>2.</b> Part II</a><ul><li data-nav-id=/learning-2021/game-dev/part-ii/introduction/ title=Introduction class=dd-item><a href=/learning-2021/game-dev/part-ii/introduction/>Introduction</a></li><li data-nav-id=/learning-2021/game-dev/part-ii/advancedtracking/ title="Advanced Tracking" class=dd-item><a href=/learning-2021/game-dev/part-ii/advancedtracking/>Advanced Tracking</a></li><li data-nav-id=/learning-2021/game-dev/part-ii/currency/ title="Currency System" class=dd-item><a href=/learning-2021/game-dev/part-ii/currency/>Currency System</a></li><li data-nav-id=/learning-2021/game-dev/part-ii/newtower/ title="New Towers" class=dd-item><a href=/learning-2021/game-dev/part-ii/newtower/>New Towers</a></li><li data-nav-id=/learning-2021/game-dev/part-ii/projectiles/ title=Projectiles class=dd-item><a href=/learning-2021/game-dev/part-ii/projectiles/>Projectiles</a></li></ul></li><li data-nav-id=/learning-2021/game-dev/part-iii/ title="Part III" class=dd-item><a href=/learning-2021/game-dev/part-iii/><b>3.</b> Part III</a><ul><li data-nav-id=/learning-2021/game-dev/part-iii/introduction/ title=Introduction class=dd-item><a href=/learning-2021/game-dev/part-iii/introduction/>Introduction</a></li><li data-nav-id=/learning-2021/game-dev/part-iii/currency/ title="More Currency" class=dd-item><a href=/learning-2021/game-dev/part-iii/currency/>More Currency</a></li><li data-nav-id=/learning-2021/game-dev/part-iii/upgrades/ title="Tower Upgrades" class=dd-item><a href=/learning-2021/game-dev/part-iii/upgrades/>Tower Upgrades</a></li><li data-nav-id=/learning-2021/game-dev/part-iii/userinterface/ title="User Interface" class=dd-item><a href=/learning-2021/game-dev/part-iii/userinterface/>User Interface</a></li><li data-nav-id=/learning-2021/game-dev/part-iii/makinglevels/ title="Making Levels" class=dd-item><a href=/learning-2021/game-dev/part-iii/makinglevels/>Making Levels</a></li><li data-nav-id=/learning-2021/game-dev/part-iii/pathcreationapi/ title="Path Creation API" class=dd-item><a href=/learning-2021/game-dev/part-iii/pathcreationapi/>Path Creation API</a></li><li data-nav-id=/learning-2021/game-dev/part-iii/powerups/ title=Powerups class=dd-item><a href=/learning-2021/game-dev/part-iii/powerups/>Powerups</a></li><li data-nav-id=/learning-2021/game-dev/part-iii/challenge/ title=Challenges class=dd-item><a href=/learning-2021/game-dev/part-iii/challenge/>Challenges</a></li></ul></li></ul></li><li data-nav-id=/learning-2021/game-jam/ title="Game Jam" class="dd-item parent alwaysopen"><a href=/learning-2021/game-jam/>Game Jam</a><ul><li data-nav-id=/learning-2021/game-jam/leaderboard/ title=Leaderboard class=dd-item><a href=/learning-2021/game-jam/leaderboard/>Leaderboard</a></li><li data-nav-id=/learning-2021/game-jam/tetris-workshop/ title="Tetris Workshop" class=dd-item><a href=/learning-2021/game-jam/tetris-workshop/>Tetris Workshop</a><ul><li data-nav-id=/learning-2021/game-jam/tetris-workshop/object-oriented-programming/ title="Object Oriented Programming" class=dd-item><a href=/learning-2021/game-jam/tetris-workshop/object-oriented-programming/>Object Oriented Programming</a></li><li data-nav-id=/learning-2021/game-jam/tetris-workshop/multi-dimensional-arrays/ title="Multi-Dimensional Arrays" class=dd-item><a href=/learning-2021/game-jam/tetris-workshop/multi-dimensional-arrays/>Multi-Dimensional Arrays</a></li><li data-nav-id=/learning-2021/game-jam/tetris-workshop/threads/ title=Multi-Threading class=dd-item><a href=/learning-2021/game-jam/tetris-workshop/threads/>Multi-Threading</a></li><li data-nav-id=/learning-2021/game-jam/tetris-workshop/tetris/ title=Tetris class=dd-item><a href=/learning-2021/game-jam/tetris-workshop/tetris/>Tetris</a></li></ul></li><li data-nav-id=/learning-2021/game-jam/jumpingphysics/ title="Jumping Physics Workshop" class="dd-item parent"><a href=/learning-2021/game-jam/jumpingphysics/>Jumping Physics Workshop</a><ul><li data-nav-id=/learning-2021/game-jam/jumpingphysics/collisions/ title=Collisions class="dd-item active"><a href=/learning-2021/game-jam/jumpingphysics/collisions/>Collisions</a></li><li data-nav-id=/learning-2021/game-jam/jumpingphysics/jumpingphysics/ title="Jumping Physics" class=dd-item><a href=/learning-2021/game-jam/jumpingphysics/jumpingphysics/>Jumping Physics</a></li></ul></li><li data-nav-id=/learning-2021/game-jam/resources/ title=Resources class=dd-item><a href=/learning-2021/game-jam/resources/>Resources</a><ul><li data-nav-id=/learning-2021/game-jam/resources/github/ title="A Github Crash Course" class="dd-item alwaysopen"><a href=/learning-2021/game-jam/resources/github/>A Github Crash Course</a><ul></ul></li><li data-nav-id=/learning-2021/game-jam/resources/devpost-info/ title="Devpost Information" class="dd-item alwaysopen"><a href=/learning-2021/game-jam/resources/devpost-info/>Devpost Information</a><ul></ul></li><li data-nav-id=/learning-2021/game-jam/resources/tips/ title="Tips & Tricks" class="dd-item alwaysopen"><a href=/learning-2021/game-jam/resources/tips/>Tips & Tricks</a><ul></ul></li><li data-nav-id=/learning-2021/game-jam/resources/pitch/ title="Pitch Creation" class="dd-item alwaysopen"><a href=/learning-2021/game-jam/resources/pitch/>Pitch Creation</a><ul></ul></li></ul></li></ul></li><li data-nav-id=/learning-2021/lyon-hacks/ title=LyonHacks class="dd-item alwaysopen"><a href=/learning-2021/lyon-hacks/>LyonHacks</a><ul><li data-nav-id=/learning-2021/lyon-hacks/season-ii/ title="LyonHacks Season II" class="dd-item alwaysopen"><a href=/learning-2021/lyon-hacks/season-ii/>LyonHacks Season II</a><ul></ul></li><li data-nav-id=/learning-2021/lyon-hacks/legacy/ title="Legacy Events" class=dd-item><a href=/learning-2021/lyon-hacks/legacy/>Legacy Events</a><ul><li data-nav-id=/learning-2021/lyon-hacks/legacy/season-i/ title="Season I" class=dd-item><a href=/learning-2021/lyon-hacks/legacy/season-i/>Season I</a></li></ul></li></ul></li></ul></li><li data-nav-id=/learning-2022/ title="Learning 2022" class=dd-item><a href=/learning-2022/>Learning 2022</a><ul><li data-nav-id=/learning-2022/web-development-workshop/ title="Web Dev Workshop" class="dd-item alwaysopen"><a href=/learning-2022/web-development-workshop/>Web Dev Workshop</a><ul><li data-nav-id=/learning-2022/web-development-workshop/running-html-files/ title="Opening HTML Files in Your Browser" class="dd-item alwaysopen"><a href=/learning-2022/web-development-workshop/running-html-files/>Opening HTML Files in Your Browser</a><ul></ul></li><li data-nav-id=/learning-2022/web-development-workshop/editing-html-files/ title="Editing HTML Files" class="dd-item alwaysopen"><a href=/learning-2022/web-development-workshop/editing-html-files/>Editing HTML Files</a><ul></ul></li></ul></li></ul></li></ul><div id=footer><a href=https://mcpt.ca/><p><object type=image/svg+xml data=/img/footer-icon.svg></object>
mcpt.ca</p></a><a href=https://github.com/mcpt/learning><p><i class="fab fa-github-alt"></i> source</p></a></div></div></nav><div id=body><div id=overlay></div><div class="padding highlightable"><div id=top-bar><div id=breadcrumbs><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="5"><a itemprop=item href=/><span itemprop=name>Home</span></a> ></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="4"><a itemprop=item href=/learning-2021/><span itemprop=name>Learning 2021</span></a> ></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3"><a itemprop=item href=/learning-2021/game-jam/><span itemprop=name>Game Jam</span></a> ></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="2"><a itemprop=item href=/learning-2021/game-jam/jumpingphysics/><span itemprop=name>Jumping Physics Workshop</span></a> ></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="1"><a itemprop=item href=/learning-2021/game-jam/jumpingphysics/collisions/ aria-disabled=true><span itemprop=name>Collisions</span></a></li></ol></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><ul><li><a href=#theory-behind-collisions>Theory Behind Collisions</a></li><li><a href=#checking-if-there-is-a-collision>Checking if there is a Collision</a></li><li><a href=#determining-the-type-of-collision>Determining the Type of Collision</a></li></ul></li></ul></nav></div></div></div><div id=head-tags></div><main id=body-inner><h1>Collisions</h1><hr><p>Collisions are one of the most important and fundamental aspects of game development. Based on when and how certain things collide, events occur to make the game dynamic and fun to play. In this lesson, we will go over how to implement collisions in our demo.</p><h3 id=theory-behind-collisions>Theory Behind Collisions</h3><p>Collisions in any game are all about the type of the collision and its subsequent event. For example, if a player jumps and there is a block above him, the upward collision (type) triggers a change in the player’s trajectory (event). This means it is important that we reliably get the type of collision so that we can fire the right event. Below shows how we do this.</p><p><img src=/img/General_Collision1.png alt=Interface></p><p><img src=/img/General_Collision2.png alt=Interface></p><h3 id=checking-if-there-is-a-collision>Checking if there is a Collision</h3><p>First of all, we have to check if a collision has happened at all. To do this, we can check the horizontal and vertical distance between the center of mario and the box, and if both of them are shorter than a critical distance (which we will define later) at the same time, then a collision has occurred.</p><p>Let’s first look at just getting the distance between the centers horizontally. How do we get a distance in the first place? We can simply subtract the position of one point by the position of the other, which gives us the difference/displacement between their positions. This might give us a negative value though, so we just put the result in an absolute value function (abs()) to get the raw distance. We can use this same concept to find the vertical distance.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>abs<span style=color:#f92672>(</span>player<span style=color:#f92672>[</span>distFromStart<span style=color:#f92672>]-</span>component<span style=color:#f92672>[</span>distFromStart<span style=color:#f92672>])</span>
</span></span></code></pre></div><p>Now that we have our distances, we have to find our “critical distances” for the horizontal distance and the vertical distance. This is relatively simple. If we go back to just looking at horizontal distance, we can find our critical distance by adding half of mario’s width to half of the box’s width. This makes sense, since this would be the minimum horizontal distance that could be in between the center of the box and mario. So, if we apply this to vertical distance (using half-heights instead), we can determine if there is a collision or not by seeing if both critical distances have been “breached” at the same time.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>
</span></span><span style=display:flex><span>abs<span style=color:#f92672>(</span>player<span style=color:#f92672>[</span>distFromStart<span style=color:#f92672>]-</span>component<span style=color:#f92672>[</span>distFromStart<span style=color:#f92672>])</span> <span style=color:#f92672>&lt;=</span> <span style=color:#f92672>(</span>player<span style=color:#f92672>[</span>run<span style=color:#f92672>]+</span>component<span style=color:#f92672>[</span>run<span style=color:#f92672>])/</span>2
</span></span><span style=display:flex><span><span style=color:#f92672>&amp;&amp;</span>
</span></span><span style=display:flex><span>abs<span style=color:#f92672>(</span>player<span style=color:#f92672>[</span>distFromBottom<span style=color:#f92672>]-</span>component<span style=color:#f92672>[</span>distFromBottom<span style=color:#f92672>])</span> <span style=color:#f92672>&lt;=(</span>player<span style=color:#f92672>[</span>rise<span style=color:#f92672>]+</span>component<span style=color:#f92672>[</span>rise<span style=color:#f92672>])/</span>2
</span></span><span style=display:flex><span><span style=color:#f92672>)</span>
</span></span></code></pre></div><h3 id=determining-the-type-of-collision>Determining the Type of Collision</h3><p>Ok, so we can now figure out if there is a collision. Now onto the more complex part: how do we determine the type of the collision? Did Mario hit his head? Did he land on a block? Did he run into a block? Now you will figure out how to extract this information using code and a little bit of math.</p><p><img src=/img/Collision_Sections1.png alt=Interface></p><p>First, we need to get context. Where, relative to the block, was Mario right before the collision? The first thing we need to do is store Mario’s coordinates right before the collision. We do this in the PVector variable prevPoint.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>prevPoint <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> PVector<span style=color:#f92672>(</span>player<span style=color:#f92672>[</span>distFromStart<span style=color:#f92672>],</span>player<span style=color:#f92672>[</span>distFromBottom<span style=color:#f92672>]);</span>
</span></span></code></pre></div><p>Now that we have this stored, we can determine how Mario hit the block. Take a look at the picture above. Outlined are 4 sections that split up the space surrounding the block, and Mario’s prevPoint belongs in the left section. If you draw a line from this point to where mario is now, you will see that line intersects with the left side of the collision rectangle, outlined with dash-line. In other words, in order for Mario to have collided with the box, he must have first passed through the left part of the collision rectangle. This means he must have collided with the box on the left side, which gives us our type of collision.</p><p>In fact, if Mario’s prevPoint were to have originated from the left section of the surrounding area, it works out so that any collision with the box would be a left-sided collision from the box, or a right sided collision relative to mario. So all we need to do is define each section, as well as in which section the prevPoint resides in.</p><p><img src=/img/Collision_Sections2.png alt=Interface></p><p>To determine which quadrant Mario’s prevPoint was, we can define the quadrants by taking a “critical angle” using atan2(), which helps us define the quadrants themselves. Then, we will find the angle produced by the line joining prevPoint and the center of the box. Using some if statements, we can figure out which angles correspond to which quadrants, and thus we can find the nature of the collision!</p><footer class=footline></footer></main></div><div id=navigation><a class="nav nav-prev" href=/learning-2021/game-jam/jumpingphysics/ title="Jumping Physics Workshop"><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=/learning-2021/game-jam/jumpingphysics/jumpingphysics/ title="Jumping Physics"><i class="fa fa-chevron-right"></i></a></div></div><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js?1667491630></script>
<script src=/js/perfect-scrollbar.min.js?1667491630></script>
<script src=/js/perfect-scrollbar.jquery.min.js?1667491630></script>
<script src=/js/jquery.svg.pan.zoom.js?1667491630></script>
<script src=/js/featherlight.min.js?1667491630></script>
<script src=/js/modernizr.custom-3.6.0.js?1667491630></script>
<script src=/js/mermaid.min.js?1667491630></script>
<script>typeof mermaid!="undefined"&&typeof mermaid.mermaidAPI!="undefined"&&mermaid.mermaidAPI.initialize(Object.assign({securityLevel:"antiscript"},JSON.parse('{ "startOnLoad": true }'),{startOnLoad:!1}))</script><script src=/js/relearn.js?1667491630></script></body></html>