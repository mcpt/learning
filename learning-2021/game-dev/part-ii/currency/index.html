<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.110.0"><meta name=generator content="Relearn 2.9.2
"><meta name=description content><title>Currency System :: MCPT Learning Resources</title><link href=/css/nucleus.css?1677174617 rel=stylesheet><link href=/css/fontawesome-all.min.css?1677174617 rel=stylesheet><link href=/css/featherlight.min.css?1677174617 rel=stylesheet><link href=/css/perfect-scrollbar.min.css?1677174617 rel=stylesheet><link href=/css/auto-complete.css?1677174617 rel=stylesheet><link href=/css/theme.css?1677174617 rel=stylesheet><link href=/css/theme-mcpt.css?1677174617 rel=stylesheet><link href=/css/variant.css?1677174617 rel=stylesheet><link href=/css/print.css?1677174617 rel=stylesheet media=print><link href=/css/p5js.css?1677174617 rel=stylesheet><link href=/css/sidebar.css?1677174617 rel=stylesheet><script src=/js/jquery.min.js?1677174617></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style><script src=/js/p5.min.js></script></head><body data-url=/learning-2021/game-dev/part-ii/currency/><script>var index_url="/index.json",root_url="/",baseUri=root_url.replace(/\/$/,"")</script><nav id=sidebar><div id=header-wrapper><div id=header><a href=/><img src=https://mcpt.ca/static/icons/logo.png><br><span class=subheading>LEARNING</span></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script src=/js/lunr.min.js?1677174617></script>
<script src=/js/auto-complete.js?1677174617></script>
<script src=/js/search.js?1677174617></script></div><div id=homelinks><ul><li><a class=padding href=/><i class="fas fa-home"></i> Home</a></li></ul></div><div class=highlightable><ul class=topics><li data-nav-id=/learning-2021/ title="Learning 2021" class="dd-item parent"><a href=/learning-2021/>Learning 2021</a><ul><li data-nav-id=/learning-2021/game-dev/ title="Game Series" class="dd-item parent alwaysopen"><a href=/learning-2021/game-dev/>Game Series</a><ul><li data-nav-id=/learning-2021/game-dev/leaderboard/ title=Leaderboard class=dd-item><a href=/learning-2021/game-dev/leaderboard/>Leaderboard</a></li><li data-nav-id=/learning-2021/game-dev/part-i/ title="Part I" class=dd-item><a href=/learning-2021/game-dev/part-i/><b>1.</b> Part I</a><ul><li data-nav-id=/learning-2021/game-dev/part-i/introduction/ title=Introduction class=dd-item><a href=/learning-2021/game-dev/part-i/introduction/>Introduction</a></li><li data-nav-id=/learning-2021/game-dev/part-i/draganddrop/ title="Drag And Drop" class=dd-item><a href=/learning-2021/game-dev/part-i/draganddrop/>Drag And Drop</a></li><li data-nav-id=/learning-2021/game-dev/part-i/towers/ title="Rotating Towers" class=dd-item><a href=/learning-2021/game-dev/part-i/towers/>Rotating Towers</a></li><li data-nav-id=/learning-2021/game-dev/part-i/pathforballoons/ title="Path For Balloons" class=dd-item><a href=/learning-2021/game-dev/part-i/pathforballoons/>Path For Balloons</a></li><li data-nav-id=/learning-2021/game-dev/part-i/challenge/ title="Challenge: Movement" class=dd-item><a href=/learning-2021/game-dev/part-i/challenge/>Challenge: Movement</a></li><li data-nav-id=/learning-2021/game-dev/part-i/updatingballoons/ title="Balloon Waves" class=dd-item><a href=/learning-2021/game-dev/part-i/updatingballoons/>Balloon Waves</a></li><li data-nav-id=/learning-2021/game-dev/part-i/healthchecking/ title="Health Bar" class=dd-item><a href=/learning-2021/game-dev/part-i/healthchecking/>Health Bar</a></li><li data-nav-id=/learning-2021/game-dev/part-i/towervaliditychecking/ title="Tower Validity Checking" class=dd-item><a href=/learning-2021/game-dev/part-i/towervaliditychecking/>Tower Validity Checking</a></li></ul></li><li data-nav-id=/learning-2021/game-dev/part-ii/ title="Part II" class="dd-item parent"><a href=/learning-2021/game-dev/part-ii/><b>2.</b> Part II</a><ul><li data-nav-id=/learning-2021/game-dev/part-ii/introduction/ title=Introduction class=dd-item><a href=/learning-2021/game-dev/part-ii/introduction/>Introduction</a></li><li data-nav-id=/learning-2021/game-dev/part-ii/advancedtracking/ title="Advanced Tracking" class=dd-item><a href=/learning-2021/game-dev/part-ii/advancedtracking/>Advanced Tracking</a></li><li data-nav-id=/learning-2021/game-dev/part-ii/currency/ title="Currency System" class="dd-item active"><a href=/learning-2021/game-dev/part-ii/currency/>Currency System</a></li><li data-nav-id=/learning-2021/game-dev/part-ii/newtower/ title="New Towers" class=dd-item><a href=/learning-2021/game-dev/part-ii/newtower/>New Towers</a></li><li data-nav-id=/learning-2021/game-dev/part-ii/projectiles/ title=Projectiles class=dd-item><a href=/learning-2021/game-dev/part-ii/projectiles/>Projectiles</a></li></ul></li><li data-nav-id=/learning-2021/game-dev/part-iii/ title="Part III" class=dd-item><a href=/learning-2021/game-dev/part-iii/><b>3.</b> Part III</a><ul><li data-nav-id=/learning-2021/game-dev/part-iii/introduction/ title=Introduction class=dd-item><a href=/learning-2021/game-dev/part-iii/introduction/>Introduction</a></li><li data-nav-id=/learning-2021/game-dev/part-iii/currency/ title="More Currency" class=dd-item><a href=/learning-2021/game-dev/part-iii/currency/>More Currency</a></li><li data-nav-id=/learning-2021/game-dev/part-iii/upgrades/ title="Tower Upgrades" class=dd-item><a href=/learning-2021/game-dev/part-iii/upgrades/>Tower Upgrades</a></li><li data-nav-id=/learning-2021/game-dev/part-iii/userinterface/ title="User Interface" class=dd-item><a href=/learning-2021/game-dev/part-iii/userinterface/>User Interface</a></li><li data-nav-id=/learning-2021/game-dev/part-iii/makinglevels/ title="Making Levels" class=dd-item><a href=/learning-2021/game-dev/part-iii/makinglevels/>Making Levels</a></li><li data-nav-id=/learning-2021/game-dev/part-iii/pathcreationapi/ title="Path Creation API" class=dd-item><a href=/learning-2021/game-dev/part-iii/pathcreationapi/>Path Creation API</a></li><li data-nav-id=/learning-2021/game-dev/part-iii/powerups/ title=Powerups class=dd-item><a href=/learning-2021/game-dev/part-iii/powerups/>Powerups</a></li><li data-nav-id=/learning-2021/game-dev/part-iii/challenge/ title=Challenges class=dd-item><a href=/learning-2021/game-dev/part-iii/challenge/>Challenges</a></li></ul></li></ul></li><li data-nav-id=/learning-2021/game-jam/ title="Game Jam" class="dd-item alwaysopen"><a href=/learning-2021/game-jam/>Game Jam</a><ul><li data-nav-id=/learning-2021/game-jam/leaderboard/ title=Leaderboard class=dd-item><a href=/learning-2021/game-jam/leaderboard/>Leaderboard</a></li><li data-nav-id=/learning-2021/game-jam/tetris-workshop/ title="Tetris Workshop" class=dd-item><a href=/learning-2021/game-jam/tetris-workshop/>Tetris Workshop</a><ul><li data-nav-id=/learning-2021/game-jam/tetris-workshop/object-oriented-programming/ title="Object Oriented Programming" class=dd-item><a href=/learning-2021/game-jam/tetris-workshop/object-oriented-programming/>Object Oriented Programming</a></li><li data-nav-id=/learning-2021/game-jam/tetris-workshop/multi-dimensional-arrays/ title="Multi-Dimensional Arrays" class=dd-item><a href=/learning-2021/game-jam/tetris-workshop/multi-dimensional-arrays/>Multi-Dimensional Arrays</a></li><li data-nav-id=/learning-2021/game-jam/tetris-workshop/threads/ title=Multi-Threading class=dd-item><a href=/learning-2021/game-jam/tetris-workshop/threads/>Multi-Threading</a></li><li data-nav-id=/learning-2021/game-jam/tetris-workshop/tetris/ title=Tetris class=dd-item><a href=/learning-2021/game-jam/tetris-workshop/tetris/>Tetris</a></li></ul></li><li data-nav-id=/learning-2021/game-jam/jumpingphysics/ title="Jumping Physics Workshop" class=dd-item><a href=/learning-2021/game-jam/jumpingphysics/>Jumping Physics Workshop</a><ul><li data-nav-id=/learning-2021/game-jam/jumpingphysics/collisions/ title=Collisions class=dd-item><a href=/learning-2021/game-jam/jumpingphysics/collisions/>Collisions</a></li><li data-nav-id=/learning-2021/game-jam/jumpingphysics/jumpingphysics/ title="Jumping Physics" class=dd-item><a href=/learning-2021/game-jam/jumpingphysics/jumpingphysics/>Jumping Physics</a></li></ul></li><li data-nav-id=/learning-2021/game-jam/resources/ title=Resources class=dd-item><a href=/learning-2021/game-jam/resources/>Resources</a><ul><li data-nav-id=/learning-2021/game-jam/resources/github/ title="A Github Crash Course" class="dd-item alwaysopen"><a href=/learning-2021/game-jam/resources/github/>A Github Crash Course</a><ul></ul></li><li data-nav-id=/learning-2021/game-jam/resources/devpost-info/ title="Devpost Information" class="dd-item alwaysopen"><a href=/learning-2021/game-jam/resources/devpost-info/>Devpost Information</a><ul></ul></li><li data-nav-id=/learning-2021/game-jam/resources/tips/ title="Tips & Tricks" class="dd-item alwaysopen"><a href=/learning-2021/game-jam/resources/tips/>Tips & Tricks</a><ul></ul></li><li data-nav-id=/learning-2021/game-jam/resources/pitch/ title="Pitch Creation" class="dd-item alwaysopen"><a href=/learning-2021/game-jam/resources/pitch/>Pitch Creation</a><ul></ul></li></ul></li></ul></li><li data-nav-id=/learning-2021/lyon-hacks/ title=LyonHacks class="dd-item alwaysopen"><a href=/learning-2021/lyon-hacks/>LyonHacks</a><ul><li data-nav-id=/learning-2021/lyon-hacks/season-ii/ title="LyonHacks Season II" class="dd-item alwaysopen"><a href=/learning-2021/lyon-hacks/season-ii/>LyonHacks Season II</a><ul></ul></li><li data-nav-id=/learning-2021/lyon-hacks/legacy/ title="Legacy Events" class=dd-item><a href=/learning-2021/lyon-hacks/legacy/>Legacy Events</a><ul><li data-nav-id=/learning-2021/lyon-hacks/legacy/season-i/ title="Season I" class=dd-item><a href=/learning-2021/lyon-hacks/legacy/season-i/>Season I</a></li></ul></li></ul></li></ul></li><li data-nav-id=/learning-2022/ title="Learning 2022" class=dd-item><a href=/learning-2022/>Learning 2022</a><ul><li data-nav-id=/learning-2022/holiday-game-jam-ii/ title="Holiday Game Jam II " class="dd-item alwaysopen"><a href=/learning-2022/holiday-game-jam-ii/>Holiday Game Jam II</a><ul><li data-nav-id=/learning-2022/holiday-game-jam-ii/stealing-christmas/ title="Platformer Game Workshop" class=dd-item><a href=/learning-2022/holiday-game-jam-ii/stealing-christmas/>Platformer Game Workshop</a><ul><li data-nav-id=/learning-2022/holiday-game-jam-ii/stealing-christmas/movement/ title="Basic Player Movement" class=dd-item><a href=/learning-2022/holiday-game-jam-ii/stealing-christmas/movement/>Basic Player Movement</a></li><li data-nav-id=/learning-2022/holiday-game-jam-ii/stealing-christmas/collisions/ title=Collisions class=dd-item><a href=/learning-2022/holiday-game-jam-ii/stealing-christmas/collisions/>Collisions</a></li><li data-nav-id=/learning-2022/holiday-game-jam-ii/stealing-christmas/physics/ title="Jumping Physics" class=dd-item><a href=/learning-2022/holiday-game-jam-ii/stealing-christmas/physics/>Jumping Physics</a></li></ul></li><li data-nav-id=/learning-2022/holiday-game-jam-ii/visual-novel/ title="Visual Novel Workshop" class=dd-item><a href=/learning-2022/holiday-game-jam-ii/visual-novel/>Visual Novel Workshop</a><ul><li data-nav-id=/learning-2022/holiday-game-jam-ii/visual-novel/reading-json/ title="Reading JSON" class=dd-item><a href=/learning-2022/holiday-game-jam-ii/visual-novel/reading-json/>Reading JSON</a></li><li data-nav-id=/learning-2022/holiday-game-jam-ii/visual-novel/drawing-characters/ title="Drawing Characters" class=dd-item><a href=/learning-2022/holiday-game-jam-ii/visual-novel/drawing-characters/>Drawing Characters</a></li><li data-nav-id=/learning-2022/holiday-game-jam-ii/visual-novel/dialogue-writing/ title="Writing Dialogue" class=dd-item><a href=/learning-2022/holiday-game-jam-ii/visual-novel/dialogue-writing/>Writing Dialogue</a></li><li data-nav-id=/learning-2022/holiday-game-jam-ii/visual-novel/dialogue-options/ title="Dialogue Options" class=dd-item><a href=/learning-2022/holiday-game-jam-ii/visual-novel/dialogue-options/>Dialogue Options</a></li></ul></li><li data-nav-id=/learning-2022/holiday-game-jam-ii/resources/ title="Game Jam Resource Page" class="dd-item alwaysopen"><a href=/learning-2022/holiday-game-jam-ii/resources/>Game Jam Resource Page</a><ul><li data-nav-id=/learning-2022/holiday-game-jam-ii/resources/devpost-help/ title="Devpost Information" class="dd-item alwaysopen"><a href=/learning-2022/holiday-game-jam-ii/resources/devpost-help/>Devpost Information</a><ul></ul></li><li data-nav-id=/learning-2022/holiday-game-jam-ii/resources/github-tutorial/ title="GitHub Tutorial" class="dd-item alwaysopen"><a href=/learning-2022/holiday-game-jam-ii/resources/github-tutorial/>GitHub Tutorial</a><ul></ul></li></ul></li></ul></li><li data-nav-id=/learning-2022/game-development-workshop/ title="Game Dev Workshop" class="dd-item alwaysopen"><a href=/learning-2022/game-development-workshop/>Game Dev Workshop</a><ul><li data-nav-id=/learning-2022/game-development-workshop/partone/ title="Part One" class=dd-item><a href=/learning-2022/game-development-workshop/partone/>Part One</a></li></ul></li><li data-nav-id=/learning-2022/web-development-workshop/ title="Web Dev Workshop" class="dd-item alwaysopen"><a href=/learning-2022/web-development-workshop/>Web Dev Workshop</a><ul><li data-nav-id=/learning-2022/web-development-workshop/running-html-files/ title="Opening HTML Files in Your Browser" class="dd-item alwaysopen"><a href=/learning-2022/web-development-workshop/running-html-files/>Opening HTML Files in Your Browser</a><ul></ul></li><li data-nav-id=/learning-2022/web-development-workshop/editing-html-files/ title="Editing HTML Files" class="dd-item alwaysopen"><a href=/learning-2022/web-development-workshop/editing-html-files/>Editing HTML Files</a><ul></ul></li></ul></li></ul></li></ul><div id=footer><a href=https://mcpt.ca/><p><object type=image/svg+xml data=/img/footer-icon.svg></object>
mcpt.ca</p></a><a href=https://github.com/mcpt/learning><p><i class="fab fa-github-alt"></i> source</p></a></div></div></nav><div id=body><div id=overlay></div><div class="padding highlightable"><div id=top-bar><div id=breadcrumbs><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="5"><a itemprop=item href=/><span itemprop=name>Home</span></a> ></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="4"><a itemprop=item href=/learning-2021/><span itemprop=name>Learning 2021</span></a> ></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3"><a itemprop=item href=/learning-2021/game-dev/><span itemprop=name>Game Series</span></a> ></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="2"><a itemprop=item href=/learning-2021/game-dev/part-ii/><span itemprop=name>Part II</span></a> ></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="1"><a itemprop=item href=/learning-2021/game-dev/part-ii/currency/ aria-disabled=true><span itemprop=name>Currency System</span></a></li></ol></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><ul><li><a href=#reward-for-balloon-pop>Reward for Balloon Pop</a></li><li><a href=#purchasing-towers>Purchasing Towers</a></li><li><a href=#insufficient-funds-warnings>Insufficient Funds Warnings</a></li><li><a href=#displaying-funds>Displaying Funds</a></li></ul></li></ul></nav></div></div></div><div id=head-tags></div><main id=body-inner><h1>Currency System</h1><hr><div class="attachments green"><div class=label>Currency Template Code</div><ul class=attachments-files><li><a href=/Learning%202021/game-dev/part-ii/Currency.files/Currency_Template.zip>Currency_Template.zip</a> (1 KB)</li></ul></div><h3 id=reward-for-balloon-pop>Reward for Balloon Pop</h3><p>Since we have a working system to send balloons, the next step is to reward the user when they pop balloons.</p><div class=expand><a class=expand-label onclick='$t=$(this),$t.parent(".expand-expanded.expand-marked").length?$t.next().css("display","none"):$t.parent(".expand-marked").length?$t.next().css("display","block"):$t.next(".expand-content").slideToggle(100),$t.parent().toggleClass("expand-expanded")'><i class="fas fa-chevron-down"></i>
<i class="fas fa-chevron-right"></i>
See code</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>drawBalloons</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> balloons<span style=color:#f92672>.</span><span style=color:#a6e22e>size</span><span style=color:#f92672>();</span> i<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>float</span><span style=color:#f92672>[]</span> balloon <span style=color:#f92672>=</span> balloons<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>i<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        updatePositions<span style=color:#f92672>(</span>balloon<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>balloon<span style=color:#f92672>[</span>hp<span style=color:#f92672>]</span> <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        handleBalloonPop<span style=color:#f92672>();</span> <span style=color:#75715e>// the balloon has been popped by a tower
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        
</span></span><span style=display:flex><span>        balloons<span style=color:#f92672>.</span><span style=color:#a6e22e>remove</span><span style=color:#f92672>(</span>i<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        i<span style=color:#f92672>--;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>continue</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>atEndOfPath<span style=color:#f92672>(</span>balloon<span style=color:#f92672>[</span>distanceTravelled<span style=color:#f92672>]))</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        balloons<span style=color:#f92672>.</span><span style=color:#a6e22e>remove</span><span style=color:#f92672>(</span>i<span style=color:#f92672>);</span> <span style=color:#75715e>// Removing the balloon from the list
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        health<span style=color:#f92672>--;</span> <span style=color:#75715e>// Lost a life.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        i<span style=color:#f92672>--;</span> <span style=color:#75715e>// Must decrease this counter variable, since the &#34;next&#34; balloon would be skipped
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>// When you remove a balloon from the list, all the indexes of the balloons &#34;higher-up&#34; in the list will decrement by 1
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div></div></div><p>In Balloons.pde, we check if balloons have positive hp when they are drawn in drawBalloon(). Here, we have an if statement that checks if <code>balloon[hp] &lt;= 0</code>, which means that the balloon has been popped (it has less than zero hp). We can add our method handleBalloonPop(), which will add money to the user’s balance once they pop a balloon. Here are the two methods <code>handleBalloonPop()</code> and <code>increaseBalance()</code> in Currency.pde.</p><div class=expand><a class=expand-label onclick='$t=$(this),$t.parent(".expand-expanded.expand-marked").length?$t.next().css("display","none"):$t.parent(".expand-marked").length?$t.next().css("display","block"):$t.next(".expand-content").slideToggle(100),$t.parent().toggleClass("expand-expanded")'><i class="fas fa-chevron-down"></i>
<i class="fas fa-chevron-right"></i>
See code</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>handleBalloonPop</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Reward the player for popping the balloon
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  increaseBalance<span style=color:#f92672>(</span>rewardPerBalloon<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>increaseBalance</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> amount<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  currentBalance <span style=color:#f92672>+=</span> amount<span style=color:#f92672>;</span> <span style=color:#75715e>// Increase the current balance by the amount given
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>}</span>
</span></span></code></pre></div></div></div><p>The second method, <code>increaseBalance()</code> takes a parameter which is the amount that is to be added to the user’s balance. For popping balloons, the user gets $20, which is set in the global variables section, <code>rewardPerBalloon.</code></p><div class=expand><a class=expand-label onclick='$t=$(this),$t.parent(".expand-expanded.expand-marked").length?$t.next().css("display","none"):$t.parent(".expand-marked").length?$t.next().css("display","block"):$t.next(".expand-content").slideToggle(100),$t.parent().toggleClass("expand-expanded")'><i class="fas fa-chevron-down"></i>
<i class="fas fa-chevron-right"></i>
See code</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// Current amount of money owned by the player
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>int</span> currentBalance <span style=color:#f92672>=</span> <span style=color:#ae81ff>500</span><span style=color:#f92672>;</span> <span style=color:#75715e>// Give the user $500 of starting balance
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>final</span> <span style=color:#66d9ef>int</span> rewardPerBalloon <span style=color:#f92672>=</span> <span style=color:#ae81ff>20</span><span style=color:#f92672>;</span> <span style=color:#75715e>// Money earned by popping a balloon
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>final</span> <span style=color:#66d9ef>int</span> towerPrice <span style=color:#f92672>=</span> <span style=color:#ae81ff>100</span><span style=color:#f92672>;</span> <span style=color:#75715e>// Price to purchase a single tower
</span></span></span></code></pre></div></div></div><p>For <code>handleBalloonPop()</code>, this method is called whenever a balloon is popped, so we just call <code>increaseBalance()</code> with the <code>rewardPerBalloon</code> in order to reward the user.</p><h3 id=purchasing-towers>Purchasing Towers</h3><p>All the towers now have a price! Whenever the user picks up a tower, they will need to purchase it using their balance. Since the <code>handlePickUp()</code> method is called whenever the user picks up a tower, we will use it to charge the player when purchasing a tower and prevent them from picking up towers without sufficient money. When purchasing a tower, we first need to check if the player has enough money to purchase the tower. This can be done by comparing the player&rsquo;s current balance to the cost of the tower. The costs of the towers are stored in the towerPrice array.</p><div class=expand><a class=expand-label onclick='$t=$(this),$t.parent(".expand-expanded.expand-marked").length?$t.next().css("display","none"):$t.parent(".expand-marked").length?$t.next().css("display","block"):$t.next(".expand-content").slideToggle(100),$t.parent().toggleClass("expand-expanded")'><i class="fas fa-chevron-down"></i>
<i class="fas fa-chevron-right"></i>
See code for checking funds</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>/** Checks to see if there is sufficient balance for purchasing a certain item
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  Parameter &#34;cost&#34; is the cost of the item to be purchased
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>hasSufficientFunds</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> cost<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>currentBalance <span style=color:#f92672>&lt;</span> cost<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>;</span> <span style=color:#75715e>// Not enough money to purchase the tower
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>;</span> <span style=color:#75715e>// Enough money to purchase the tower
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div></div></div><p>If the balance is greater than or equal to the cost of the tower, then allow the user to pick up the tower. The cost of that tower will be deducted from the player&rsquo;s balance once they drop the tower onto a valid location (not in the trash).</p><div class=expand><a class=expand-label onclick='$t=$(this),$t.parent(".expand-expanded.expand-marked").length?$t.next().css("display","none"):$t.parent(".expand-marked").length?$t.next().css("display","block"):$t.next(".expand-content").slideToggle(100),$t.parent().toggleClass("expand-expanded")'><i class="fas fa-chevron-down"></i>
<i class="fas fa-chevron-right"></i>
See code for purchasing tower</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>/** Purchases a tower
</span></span></span><span style=display:flex><span><span style=color:#75715e> *  Parameter &#34;cost&#34; is the cost of the tower to be purchased
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>purchaseTower</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> cost<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  currentBalance <span style=color:#f92672>-=</span> cost<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div></div></div><p>If the balance is less than the cost of the tower, we will not allow the tower to be picked up.</p><div class=expand><a class=expand-label onclick='$t=$(this),$t.parent(".expand-expanded.expand-marked").length?$t.next().css("display","none"):$t.parent(".expand-marked").length?$t.next().css("display","block"):$t.next(".expand-content").slideToggle(100),$t.parent().toggleClass("expand-expanded")'><i class="fas fa-chevron-down"></i>
<i class="fas fa-chevron-right"></i>
See code for pick-up handling</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// Will be called whenever a tower is picked up
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>handlePickUp</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> pickedUpTowerID<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Only if there is sufficient money to purchase the tower...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>withinBounds<span style=color:#f92672>(</span>pickedUpTowerID<span style=color:#f92672>)</span> <span style=color:#f92672>&amp;&amp;</span> hasSufficientFunds<span style=color:#f92672>(</span>towerPrice<span style=color:#f92672>[</span>pickedUpTowerID<span style=color:#f92672>]))</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Pick up the tower
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div></div></div><h3 id=insufficient-funds-warnings>Insufficient Funds Warnings</h3><p>To make it easier for the player, we will warn them whenever they try to purchase a tower that they don&rsquo;t have enough money for. To check if this is happening, we will first see if the user is clicking within the pick-up box. We will check the <code>mousePressed</code> variable and <code>withinBounds()</code> method to do so. Then we will check to see if the user has enough money, if they wanted to purchase the tower. We will use the <code>hasSufficientFunds()</code> method that we had previously implemented to see if they do. If both of these conditions are true, then we should colour the text red to warn the user that they have insufficient funds.</p><div class=expand><a class=expand-label onclick='$t=$(this),$t.parent(".expand-expanded.expand-marked").length?$t.next().css("display","none"):$t.parent(".expand-marked").length?$t.next().css("display","block"):$t.next(".expand-content").slideToggle(100),$t.parent().toggleClass("expand-expanded")'><i class="fas fa-chevron-down"></i>
<i class="fas fa-chevron-right"></i>
See code for funds warnings</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// Checks to see if the user is attempting to purchase/pick up a tower but has insufficient funds
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>attemptingToPurchaseTowerWithoutFunds</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> towerID<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>mousePressed <span style=color:#f92672>&amp;&amp;</span> withinBounds<span style=color:#f92672>(</span>towerID<span style=color:#f92672>)</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#f92672>!</span>hasSufficientFunds<span style=color:#f92672>(</span>towerPrice<span style=color:#f92672>[</span>towerID<span style=color:#f92672>]))</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div></div></div><h3 id=displaying-funds>Displaying Funds</h3><p><div class=expand><a class=expand-label onclick='$t=$(this),$t.parent(".expand-expanded.expand-marked").length?$t.next().css("display","none"):$t.parent(".expand-marked").length?$t.next().css("display","block"):$t.next(".expand-content").slideToggle(100),$t.parent().toggleClass("expand-expanded")'><i class="fas fa-chevron-down"></i>
<i class="fas fa-chevron-right"></i>
See code</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// Displays the user&#39;s current balance on the screen
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>drawBalanceDisplay</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// If the user is attempting to purchase a tower without funds, warn them with red display text
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>attemptingToPurchaseTowerWithoutFunds<span style=color:#f92672>())</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    fill<span style=color:#f92672>(</span>towerErrorColour<span style=color:#f92672>);</span> <span style=color:#75715e>// Red text
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    fill<span style=color:#f92672>(</span><span style=color:#ae81ff>0</span><span style=color:#f92672>);</span> <span style=color:#75715e>// Black text
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  text<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Current Balance: $&#34;</span> <span style=color:#f92672>+</span> currentBalance<span style=color:#f92672>,</span> <span style=color:#ae81ff>336</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>65</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div></div></div>First we check if they are trying to buy a tower without funds, since then we make the text turn red to warn the user that they do not have enough funds. We call the method that was written before, <code>attemptingToPurchaseTowerWithoutFunds()</code>, to check if the user doesn’t have enough money. This will return a boolean value (either <code>True</code> or <code>False</code>) to us, so we can put this in an if statement. If you check back above, it returns true when the user doesn’t have funds, so we change the fill colour to towerErrorColour (global variable in <code>Towers.pde</code> when towers are placed illegally) in the if block. Otherwise, we change the text back to the default black text. We can then display the balance, using the <code>text()</code> method.</p><footer class=footline></footer></main></div><div id=navigation><a class="nav nav-prev" href=/learning-2021/game-dev/part-ii/advancedtracking/ title="Advanced Tracking"><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=/learning-2021/game-dev/part-ii/newtower/ title="New Towers"><i class="fa fa-chevron-right"></i></a></div></div><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js?1677174617></script>
<script src=/js/perfect-scrollbar.min.js?1677174617></script>
<script src=/js/perfect-scrollbar.jquery.min.js?1677174617></script>
<script src=/js/jquery.svg.pan.zoom.js?1677174617></script>
<script src=/js/featherlight.min.js?1677174617></script>
<script src=/js/modernizr.custom-3.6.0.js?1677174617></script>
<script src=/js/mermaid.min.js?1677174617></script>
<script>typeof mermaid!="undefined"&&typeof mermaid.mermaidAPI!="undefined"&&mermaid.mermaidAPI.initialize(Object.assign({securityLevel:"antiscript"},JSON.parse('{ "startOnLoad": true }'),{startOnLoad:!1}))</script><script src=/js/relearn.js?1677174617></script></body></html>