<!doctype html><html lang=en class="js csstransforms3d">
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=generator content="Hugo 0.91.2">
<meta name=generator content="Relearn 2.9.2
">
<meta name=description content>
<title>Jumping Physics :: MCPT Learning Resources</title>
<link href=/css/nucleus.css?1641010022 rel=stylesheet>
<link href=/css/fontawesome-all.min.css?1641010022 rel=stylesheet>
<link href=/css/featherlight.min.css?1641010022 rel=stylesheet>
<link href=/css/perfect-scrollbar.min.css?1641010022 rel=stylesheet>
<link href=/css/auto-complete.css?1641010022 rel=stylesheet>
<link href=/css/theme.css?1641010022 rel=stylesheet>
<link href=/css/theme-mcpt.css?1641010022 rel=stylesheet>
<link href=/css/variant.css?1641010022 rel=stylesheet>
<link href=/css/print.css?1641010022 rel=stylesheet media=print>
<link href=/css/p5js.css?1641010022 rel=stylesheet>
<link href=/css/sidebar.css?1641010022 rel=stylesheet>
<script src=/js/jquery.min.js?1641010022></script>
<style>:root #header+#content>#left>#rlblock_left{display:none!important}</style><script src=/js/p5.min.js></script>
</head>
<body data-url=/game-jam/jumpingphysics/jumpingphysics/>
<script>var index_url="/index.json",root_url="/",baseUri=root_url.replace(/\/$/,'')</script>
<nav id=sidebar>
<div id=header-wrapper>
<div id=header>
<a href=/>
<img src=https://mcpt.ca/static/icons/logo.png>
<br>
<span class=subheading>LEARNING</span>
</a>
</div>
<div class=searchbox>
<label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span>
</div>
<script src=/js/lunr.min.js?1641010022></script>
<script src=/js/auto-complete.js?1641010022></script>
<script src=/js/search.js?1641010022></script>
</div>
<div id=homelinks>
<ul>
<li>
<a class=padding href=/><i class="fas fa-home"></i> Home</a>
</li>
</ul>
</div>
<div class=highlightable>
<ul class=topics>
<li data-nav-id=/game-dev/ title="Game Series" class=dd-item><a href=/game-dev/>Game Series</a><ul>
<li data-nav-id=/game-dev/leaderboard/ title=Leaderboard class=dd-item><a href=/game-dev/leaderboard/>Leaderboard</a></li>
<li data-nav-id=/game-dev/part-i/ title="Part I" class=dd-item><a href=/game-dev/part-i/><b>1.</b> Part I</a><ul>
<li data-nav-id=/game-dev/part-i/introduction/ title=Introduction class=dd-item><a href=/game-dev/part-i/introduction/>Introduction</a></li>
<li data-nav-id=/game-dev/part-i/draganddrop/ title="Drag And Drop" class=dd-item><a href=/game-dev/part-i/draganddrop/>Drag And Drop</a></li>
<li data-nav-id=/game-dev/part-i/towers/ title="Rotating Towers" class=dd-item><a href=/game-dev/part-i/towers/>Rotating Towers</a></li>
<li data-nav-id=/game-dev/part-i/pathforballoons/ title="Path For Balloons" class=dd-item><a href=/game-dev/part-i/pathforballoons/>Path For Balloons</a></li>
<li data-nav-id=/game-dev/part-i/challenge/ title="Challenge: Movement" class=dd-item><a href=/game-dev/part-i/challenge/>Challenge: Movement</a></li>
<li data-nav-id=/game-dev/part-i/updatingballoons/ title="Balloon Waves" class=dd-item><a href=/game-dev/part-i/updatingballoons/>Balloon Waves</a></li>
<li data-nav-id=/game-dev/part-i/healthchecking/ title="Health Bar" class=dd-item><a href=/game-dev/part-i/healthchecking/>Health Bar</a></li>
<li data-nav-id=/game-dev/part-i/towervaliditychecking/ title="Tower Validity Checking" class=dd-item><a href=/game-dev/part-i/towervaliditychecking/>Tower Validity Checking</a></li></ul></li>
<li data-nav-id=/game-dev/part-ii/ title="Part II" class=dd-item><a href=/game-dev/part-ii/><b>2.</b> Part II</a><ul>
<li data-nav-id=/game-dev/part-ii/introduction/ title=Introduction class=dd-item><a href=/game-dev/part-ii/introduction/>Introduction</a></li>
<li data-nav-id=/game-dev/part-ii/advancedtracking/ title="Advanced Tracking" class=dd-item><a href=/game-dev/part-ii/advancedtracking/>Advanced Tracking</a></li>
<li data-nav-id=/game-dev/part-ii/currency/ title="Currency System" class=dd-item><a href=/game-dev/part-ii/currency/>Currency System</a></li>
<li data-nav-id=/game-dev/part-ii/newtower/ title="New Towers" class=dd-item><a href=/game-dev/part-ii/newtower/>New Towers</a></li>
<li data-nav-id=/game-dev/part-ii/projectiles/ title=Projectiles class=dd-item><a href=/game-dev/part-ii/projectiles/>Projectiles</a></li></ul></li>
<li data-nav-id=/game-dev/part-iii/ title="Part III" class=dd-item><a href=/game-dev/part-iii/><b>3.</b> Part III</a><ul>
<li data-nav-id=/game-dev/part-iii/introduction/ title=Introduction class=dd-item><a href=/game-dev/part-iii/introduction/>Introduction</a></li>
<li data-nav-id=/game-dev/part-iii/currency/ title="More Currency" class=dd-item><a href=/game-dev/part-iii/currency/>More Currency</a></li>
<li data-nav-id=/game-dev/part-iii/upgrades/ title="Tower Upgrades" class=dd-item><a href=/game-dev/part-iii/upgrades/>Tower Upgrades</a></li>
<li data-nav-id=/game-dev/part-iii/userinterface/ title="User Interface" class=dd-item><a href=/game-dev/part-iii/userinterface/>User Interface</a></li>
<li data-nav-id=/game-dev/part-iii/makinglevels/ title="Making Levels" class=dd-item><a href=/game-dev/part-iii/makinglevels/>Making Levels</a></li>
<li data-nav-id=/game-dev/part-iii/pathcreationapi/ title="Path Creation API" class=dd-item><a href=/game-dev/part-iii/pathcreationapi/>Path Creation API</a></li>
<li data-nav-id=/game-dev/part-iii/powerups/ title=Powerups class=dd-item><a href=/game-dev/part-iii/powerups/>Powerups</a></li>
<li data-nav-id=/game-dev/part-iii/challenge/ title=Challenges class=dd-item><a href=/game-dev/part-iii/challenge/>Challenges</a></li></ul></li></ul></li>
<li data-nav-id=/game-jam/ title="Game Jam" class="dd-item parent"><a href=/game-jam/>Game Jam</a><ul>
<li data-nav-id=/game-jam/leaderboard/ title=Leaderboard class=dd-item><a href=/game-jam/leaderboard/>Leaderboard</a></li>
<li data-nav-id=/game-jam/tetris-workshop/ title="Tetris Workshop" class=dd-item><a href=/game-jam/tetris-workshop/>Tetris Workshop</a><ul>
<li data-nav-id=/game-jam/tetris-workshop/object-oriented-programming/ title="Object Oriented Programming" class=dd-item><a href=/game-jam/tetris-workshop/object-oriented-programming/>Object Oriented Programming</a></li>
<li data-nav-id=/game-jam/tetris-workshop/multi-dimensional-arrays/ title="Multi-Dimensional Arrays" class=dd-item><a href=/game-jam/tetris-workshop/multi-dimensional-arrays/>Multi-Dimensional Arrays</a></li>
<li data-nav-id=/game-jam/tetris-workshop/threads/ title=Multi-Threading class=dd-item><a href=/game-jam/tetris-workshop/threads/>Multi-Threading</a></li>
<li data-nav-id=/game-jam/tetris-workshop/tetris/ title=Tetris class=dd-item><a href=/game-jam/tetris-workshop/tetris/>Tetris</a></li></ul></li>
<li data-nav-id=/game-jam/jumpingphysics/ title="Jumping Physics Workshop" class="dd-item parent"><a href=/game-jam/jumpingphysics/>Jumping Physics Workshop</a><ul>
<li data-nav-id=/game-jam/jumpingphysics/collisions/ title=Collisions class=dd-item><a href=/game-jam/jumpingphysics/collisions/>Collisions</a></li>
<li data-nav-id=/game-jam/jumpingphysics/jumpingphysics/ title="Jumping Physics" class="dd-item active"><a href=/game-jam/jumpingphysics/jumpingphysics/>Jumping Physics</a></li></ul></li>
<li data-nav-id=/game-jam/resources/ title=Resources class=dd-item><a href=/game-jam/resources/>Resources</a><ul>
<li data-nav-id=/game-jam/resources/github/ title="A Github Crash Course" class="dd-item alwaysopen"><a href=/game-jam/resources/github/>A Github Crash Course</a><ul></ul></li>
<li data-nav-id=/game-jam/resources/devpost-info/ title="Devpost Information" class="dd-item alwaysopen"><a href=/game-jam/resources/devpost-info/>Devpost Information</a><ul></ul></li>
<li data-nav-id=/game-jam/resources/tips/ title="Tips & Tricks" class="dd-item alwaysopen"><a href=/game-jam/resources/tips/>Tips & Tricks</a><ul></ul></li>
<li data-nav-id=/game-jam/resources/pitch/ title="Pitch Creation" class="dd-item alwaysopen"><a href=/game-jam/resources/pitch/>Pitch Creation</a><ul></ul></li></ul></li></ul></li>
<li data-nav-id=/lyon-hacks/ title=LyonHacks class=dd-item><a href=/lyon-hacks/>LyonHacks</a><ul>
<li data-nav-id=/lyon-hacks/season-i/ title="Season I" class="dd-item alwaysopen"><a href=/lyon-hacks/season-i/>Season I</a><ul></ul></li>
<li data-nav-id=/lyon-hacks/season-ii/ title="Season II" class="dd-item alwaysopen"><a href=/lyon-hacks/season-ii/>Season II</a><ul></ul></li></ul></li>
</ul>
<div id=footer><a href=https://mcpt.ca/>
<p>
<object type=image/svg+xml data=/img/footer-icon.svg></object>
mcpt.ca
</p>
</a>
<a href=https://github.com/mcpt/learning><p><i class="fab fa-github-alt"></i> source</p></a>
</div>
</div>
</nav>
<div id=body>
<div id=overlay></div>
<div class="padding highlightable">
<div id=top-bar>
<div id=breadcrumbs>
<span id=sidebar-toggle-span>
<a href=# id=sidebar-toggle data-sidebar-toggle>
<i class="fas fa-bars"></i>
</a>
</span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span>
<ol class=links itemscope itemtype=http://schema.org/BreadcrumbList>
<meta itemprop=itemListOrder content="Descending">
<li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="4"><a itemprop=item href=/><span itemprop=name>Home</span></a> > </li>
<li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3"><a itemprop=item href=/game-jam/><span itemprop=name>Game Jam</span></a> > </li>
<li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="2"><a itemprop=item href=/game-jam/jumpingphysics/><span itemprop=name>Jumping Physics Workshop</span></a> > </li>
<li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="1"><a itemprop=item href=/game-jam/jumpingphysics/jumpingphysics/ aria-disabled=true><span itemprop=name>Jumping Physics</span></a></li>
</ol>
</div>
<div class=progress>
<div class=wrapper>
<nav id=TableOfContents>
<ul>
<li>
<ul>
<li><a href=#basics-of-jumping-in-games>Basics of Jumping in Games</a></li>
<li><a href=#jumping-in-our-game>Jumping in Our Game</a></li>
<li><a href=#programming-topics-you-will-need-to-know-that-may-be-new>Programming topics you will need to know (that may be new)</a></li>
<li><a href=#main-pde-file>Main .pde File</a></li>
<li><a href=#vertical-and-horizontal-movement>Vertical and Horizontal Movement</a></li>
<li><a href=#collisions>Collisions</a></li>
</ul>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div id=head-tags>
</div>
<main id=body-inner>
<h1>Jumping Physics</h1>
<hr>
<p>Jumping is a very common mechanic in games (especially platformers). In this workshop you&rsquo;ll learn how to implement this mechanic in processing, which can be transferred to other languages. Additionally, you&rsquo;ll learn how to check for collisions in jumps.</p>
<h3 id=basics-of-jumping-in-games>Basics of Jumping in Games</h3>
<p>In our platformer-style game, we control the user&rsquo;s jumps by pressing the up button (holding the button for a higher jump) and then the square (character) jumps upwards and then comes back down to the floor. Jumps in most games have a shape resembling a downward facing parabola, the first half where they jump up and their height increases, then gravity pulls them back down the ground.</p>
<h3 id=jumping-in-our-game>Jumping in Our Game</h3>
<h4 id=1-verticalmovementstate>1. verticalMovementState</h4>
<p>A variable that tracks the user&rsquo;s current jumping state, either 0,1,2,3 or 4.</p>
<ul>
<li><strong>verticalMovementState = 0 (defaultMovement):</strong> default movement state</li>
<li><strong>verticalMovementState = 1 (heightManuallyIncreasing):</strong> user is pressing the up button</li>
<li><strong>verticalMovementState = 2 (heightParabolicallyIncreasing):</strong> character is out of fuel, jump trajectory beceomes parabolic</li>
<li><strong>verticalMovementState = 3 (heightParabolicallyDecreasing):</strong> character starts to fall (second half of parabola)</li>
<li><strong>verticalMovementState = 4 (terminalVelocityReached):</strong> terminal velocity of the user during the fall
These cases will help us determine which way the character needs to move next.</li>
</ul>
<h4 id=2-fuel>2. Fuel</h4>
<p>We limit the max height a user can jump to with our fuel variable. When the player is manually increasing the height (holding the up button), their character&rsquo;s fuel decreases, and once it hits 0, the character moves to the next movement state. This prevents the user from making their character go upward continuously.</p>
<h4 id=3-player-array-floats>3. Player Array (floats)</h4>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>final</span> <span style=color:#66d9ef>int</span> firstDistFromStart <span style=color:#f92672>=</span> 100<span style=color:#f92672>,</span> firstDistFromBottom <span style=color:#f92672>=</span> 100<span style=color:#f92672>,</span> firstRun <span style=color:#f92672>=</span> 25<span style=color:#f92672>,</span> firstRise <span style=color:#f92672>=</span> 50<span style=color:#f92672>;</span>
<span style=color:#66d9ef>float</span><span style=color:#f92672>[]</span> player <span style=color:#f92672>=</span> <span style=color:#f92672>{</span>firstDistFromStart<span style=color:#f92672>,</span> firstDistFromBottom<span style=color:#f92672>,</span> firstRun<span style=color:#f92672>,</span> firstRise<span style=color:#f92672>};</span>
</code></pre></div><p>We store the player&rsquo;s attributes in this float array, to store their horizontal distance, vertical distance,</p>
<h4 id=4-time>4. Time</h4>
<p>We use time to determine the current height of the character by using the parabolic motion formula.</p>
<h3 id=programming-topics-you-will-need-to-know-that-may-be-new>Programming topics you will need to know (that may be new)</h3>
<h4 id=1-keypressed-keypressed-and-keyreleased>1. keyPressed(), keyPressed and keyReleased()</h4>
<p>In Processing, we have the <a href=https://processing.org/reference/keyPressed_.html>keyPressed()</a> and <a href=https://processing.org/reference/keyReleased_.html>keyReleased()</a> methods, which run when a key is pressed, and when it is released respectively. The <a href=https://processing.org/reference/keyPressed.html>keyPressed</a> without brackets is a built in boolean variable that turns true if any key is pressed.</p>
<h4 id=2-switch-case-statements>2. Switch case statements</h4>
<p>Similar to if-else blocks, switch case statements test if a variable is equal to each case.
The general form looks something like this:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>switch</span><span style=color:#f92672>(</span>var<span style=color:#f92672>){</span>
  <span style=color:#66d9ef>case</span> case1value<span style=color:#f92672>:</span>
    <span style=color:#75715e>//statement
</span><span style=color:#75715e></span>    <span style=color:#66d9ef>break</span><span style=color:#f92672>;</span>

  <span style=color:#66d9ef>case</span> case2value<span style=color:#f92672>:</span>
    <span style=color:#75715e>//statement
</span><span style=color:#75715e></span>    <span style=color:#66d9ef>break</span><span style=color:#f92672>;</span>

  <span style=color:#66d9ef>default</span> <span style=color:#f92672>:</span> <span style=color:#75715e>//runs if none of the cases are satisfied
</span><span style=color:#75715e></span>    <span style=color:#75715e>//statements
</span><span style=color:#75715e></span>
<span style=color:#f92672>}</span>
</code></pre></div><p>For example, if we had the String variable <code>String day = "Thursday";</code>:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>switch</span><span style=color:#f92672>(</span>day<span style=color:#f92672>){</span>
  <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;Monday&#34;</span><span style=color:#f92672>:</span>
    print<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Monday&#34;</span><span style=color:#f92672>);</span>
    <span style=color:#66d9ef>break</span><span style=color:#f92672>;</span>

  <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;Thursday&#34;</span><span style=color:#f92672>:</span>
    print<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Thursday&#34;</span><span style=color:#f92672>);</span>
    <span style=color:#66d9ef>break</span><span style=color:#f92672>;</span>

<span style=color:#f92672>}</span>
</code></pre></div><p>The code above will print Thursday, because day&rsquo;s value matches the case &ldquo;Thursday&rdquo;.</p>
<h4 id=3-pvectors>3. PVectors</h4>
<p><a href=https://learning.mcpt.ca/game-dev/part-i/pathforballoons/#creating-the-path>PVector Explanation</a></p>
<h4 id=4-arraylists>4. ArrayLists</h4>
<p><a href=https://learning.mcpt.ca/game-dev/part-i/pathforballoons/#arraylists>ArrayList Tutorial</a></p>
<h3 id=main-pde-file>Main .pde File</h3>
<p>In the keyPressed() method, we track what commands the user is putting in, either going left, right or jumping. We use the boolean variables goingLeft and goingRight to &lsquo;flag&rsquo; which way the user is travelling. For going upward, we check if the character is able to jump, and if they are, we can move their movement state to heightManuallyIncreasing.
<div class=expand>
<a class=expand-label onclick="$t=$(this),$t.parent('.expand-expanded.expand-marked').length?$t.next().css('display','none'):$t.parent('.expand-marked').length?$t.next().css('display','block'):$t.next('.expand-content').slideToggle(100),$t.parent().toggleClass('expand-expanded')">
<i class="fas fa-chevron-down"></i>
<i class="fas fa-chevron-right"></i>
keyPressed()
</a>
<div class=expand-content style=display:none>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>keyPressed</span><span style=color:#f92672>(){</span>
  <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>keyCode <span style=color:#f92672>==</span> LEFT<span style=color:#f92672>){</span>
    goingLeft <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>;</span>
  <span style=color:#f92672>}</span>
  <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>keyCode <span style=color:#f92672>==</span> RIGHT<span style=color:#f92672>){</span>
    goingRight <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>;</span>
  <span style=color:#f92672>}</span>
  <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>keyCode <span style=color:#f92672>==</span> UP <span style=color:#f92672>&amp;&amp;</span> canJump<span style=color:#f92672>){</span>
    verticalMovementState <span style=color:#f92672>=</span> heightManuallyIncreasing<span style=color:#f92672>;</span>
  <span style=color:#f92672>}</span>

<span style=color:#f92672>}</span>
</code></pre></div>
</div>
</div>
Similarly, in keyReleased we edit the boolean variables goingLeft and goingRight to indicate that the user has let go of the left or right keys, so the character should stop moving. If the character was in the state heightManuallyIncreasing, that means that the user was holding the up button to make the character jump. If the up key is released, and the character was in this state, we can change the state to heightParabolicallyIncreasing.
<div class=expand>
<a class=expand-label onclick="$t=$(this),$t.parent('.expand-expanded.expand-marked').length?$t.next().css('display','none'):$t.parent('.expand-marked').length?$t.next().css('display','block'):$t.next('.expand-content').slideToggle(100),$t.parent().toggleClass('expand-expanded')">
<i class="fas fa-chevron-down"></i>
<i class="fas fa-chevron-right"></i>
keyReleased()
</a>
<div class=expand-content style=display:none>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>keyReleased</span><span style=color:#f92672>(){</span>
  <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>keyCode <span style=color:#f92672>==</span> LEFT<span style=color:#f92672>){</span>
    goingLeft <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>;</span>
  <span style=color:#f92672>}</span>
  <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>keyCode <span style=color:#f92672>==</span> RIGHT<span style=color:#f92672>){</span>
    goingRight <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>;</span>
  <span style=color:#f92672>}</span>
  <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>keyCode <span style=color:#f92672>==</span> UP <span style=color:#f92672>&amp;&amp;</span> verticalMovementState <span style=color:#f92672>==</span> heightManuallyIncreasing<span style=color:#f92672>){</span>
    verticalMovementState <span style=color:#f92672>=</span> heightParabolicallyIncreasing<span style=color:#f92672>;</span>
    t <span style=color:#f92672>=</span> <span style=color:#f92672>-</span>timeOfMax<span style=color:#f92672>;</span>
    initialDistFromBottom <span style=color:#f92672>=</span> player<span style=color:#f92672>[</span>distFromBottom<span style=color:#f92672>];</span>
  <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div>
</div>
</div></p>
<h3 id=vertical-and-horizontal-movement>Vertical and Horizontal Movement</h3>
<h4 id=horizontal-movement>Horizontal Movement</h4>
<p>For moving the character horizontally, we only have to change the character&rsquo;s distance from the start. We do this by creating a constant speed variable, which is the number of units the character will move each time. We use keypresed to check if the user has pressed a key then use the goingLeft and goingRight variables to check if the user has pressed the right arrow key or the left one. If they are moving right then we add to their distFromStart index in the player array. If they clicked the left arrow key, then we subtract from that value.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>determineHorizontalMovement</span><span style=color:#f92672>(){</span>
  <span style=color:#66d9ef>float</span> horizontalSpeed <span style=color:#f92672>=</span> 2<span style=color:#f92672>;</span>

  <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>keyPressed<span style=color:#f92672>){</span>
    <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>goingRight<span style=color:#f92672>){</span>
      player<span style=color:#f92672>[</span>distFromStart<span style=color:#f92672>]+=</span>horizontalSpeed<span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>
    <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>goingLeft <span style=color:#f92672>&amp;&amp;</span> player<span style=color:#f92672>[</span>distFromStart<span style=color:#f92672>]</span> <span style=color:#f92672>&gt;</span> 0<span style=color:#f92672>){</span>
      player<span style=color:#f92672>[</span>distFromStart<span style=color:#f92672>]-=</span>horizontalSpeed<span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>
  <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><h4 id=vertical-movement>Vertical Movement</h4>
<p>This part is a bit more complex than horizontal movement, since we need to implement some physics concepts. We write a method <code>determineHeight()</code> that implements physics kinematics to find the height of the character at a specific time, and then returns it as a float.
The main vertical movement method uses a switch case (similar to if-else if blocks & explained above) to do specific calculations based on which jumping state the character is in.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>case</span> defaultMovement<span style=color:#f92672>:</span>
    t<span style=color:#f92672>++;</span>
    player<span style=color:#f92672>[</span>distFromBottom<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> determineHeight<span style=color:#f92672>(</span>t<span style=color:#f92672>,</span> timeOfMax<span style=color:#f92672>,</span> verticalSpeed<span style=color:#f92672>,</span> initialDistFromBottom<span style=color:#f92672>,</span>0<span style=color:#f92672>);</span>
  <span style=color:#66d9ef>break</span><span style=color:#f92672>;</span>
</code></pre></div><p>In this first case, we calculate the height of the player by using our determineHeight() method, passing in these paramters. We also add to the total time, since time is passing.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>case</span> heightManuallyIncreasing<span style=color:#f92672>:</span>
    canJump <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>;</span>
    <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>fuel <span style=color:#f92672>&gt;</span> 0<span style=color:#f92672>){</span>
      fuel<span style=color:#f92672>--;</span>
      player<span style=color:#f92672>[</span>distFromBottom<span style=color:#f92672>]+=</span>verticalSpeed<span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span><span style=color:#66d9ef>else</span><span style=color:#f92672>{</span>
      verticalMovementState <span style=color:#f92672>=</span> heightParabolicallyIncreasing<span style=color:#f92672>;</span>
      t <span style=color:#f92672>=</span> <span style=color:#f92672>-</span>timeOfMax<span style=color:#f92672>;</span>
      initialDistFromBottom <span style=color:#f92672>=</span> player<span style=color:#f92672>[</span>distFromBottom<span style=color:#f92672>];</span>
    <span style=color:#f92672>}</span>
  <span style=color:#66d9ef>break</span><span style=color:#f92672>;</span>
</code></pre></div><p>In this case, we prevent the user from making any new jumps. We then check if they have remaining fuel, and add to their height if they are still jumping, as well as decrementing their remaining fuel. Otherwise, if they have no fuel, then they have reached the peak of their manual jump, and we set time equal to the start of the parabolic motion (10s), so that he reaches his peak when t=0. We set the initialDist to the character&rsquo;s current height in order to track his trajectory. Finally, we change their verticalmovement state to parabolically increasing.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>case</span> heightParabolicallyIncreasing<span style=color:#f92672>:</span>
    t<span style=color:#f92672>++;</span>
    player<span style=color:#f92672>[</span>distFromBottom<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> determineHeight<span style=color:#f92672>(</span>t<span style=color:#f92672>,</span> timeOfMax<span style=color:#f92672>,</span> verticalSpeed<span style=color:#f92672>,</span> initialDistFromBottom<span style=color:#f92672>,</span> t0<span style=color:#f92672>);</span>
    <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>t <span style=color:#f92672>&gt;=</span> 0<span style=color:#f92672>){</span>
      verticalMovementState <span style=color:#f92672>=</span> heightParabolicallyDecreasing<span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>
  <span style=color:#66d9ef>break</span><span style=color:#f92672>;</span>
</code></pre></div><p>In this case, we calculate the height of the player at time t by using determineHeight(), since it is parabolic motion. Since the max height is at t=0, we check if the time has reached 0. If it has, we change the vertical state from parabolically increasing, to parabolically decreasing.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>case</span> heightParabolicallyDecreasing<span style=color:#f92672>:</span>
    t<span style=color:#f92672>++;</span>
    player<span style=color:#f92672>[</span>distFromBottom<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> determineHeight<span style=color:#f92672>(</span>t<span style=color:#f92672>,</span>timeOfMax<span style=color:#f92672>,</span> verticalSpeed<span style=color:#f92672>,</span> initialDistFromBottom<span style=color:#f92672>,</span> t0<span style=color:#f92672>);</span>
    <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>t <span style=color:#f92672>&gt;=</span> timeOfTerminalVelocity<span style=color:#f92672>){</span>
      verticalMovementState <span style=color:#f92672>=</span> terminalVelocityReached<span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>
  <span style=color:#66d9ef>break</span><span style=color:#f92672>;</span>
</code></pre></div><p>In this case, it is similar to the previous method, we add to the time to keep track of it. Additionally, we calculate the player height with determineHeight() again. If the character&rsquo;s time reaches the threshold for terminal velocity, then the user will reach their maximum falling speed, and we change their movement state.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>case</span> terminalVelocityReached<span style=color:#f92672>:</span>
    t<span style=color:#f92672>++;</span>
    player<span style=color:#f92672>[</span>distFromBottom<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> determineHeight<span style=color:#f92672>(</span>t<span style=color:#f92672>,</span>timeOfMax<span style=color:#f92672>,</span> verticalSpeed<span style=color:#f92672>,</span> initialDistFromBottom<span style=color:#f92672>,</span> t0<span style=color:#f92672>);</span>
  <span style=color:#66d9ef>break</span><span style=color:#f92672>;</span>
</code></pre></div><p>In this last case, the user reaches terminal velocity, however we can treat this case very similarly to the previous two cases. We add to time, and calculate the character&rsquo;s height by using the determineHeight() method again.</p>
<h3 id=collisions>Collisions</h3>
<p>Additionally, we need to check for collisions between the character and the boxes we&rsquo;ve made as part of he map. To do this, we check rectangle-rectangle collision, we need to make sure none of the edges overlap. The methods <code>determineCollisionType()</code> and <code>handleCollision()</code> determine which side the character is colliding with the block from, and handling how the character moves after the collision respectively.</p>
<footer class=footline>
</footer>
</main>
</div>
<div id=navigation>
<a class="nav nav-prev" href=/game-jam/jumpingphysics/collisions/ title=Collisions><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=/game-jam/resources/ title=Resources><i class="fa fa-chevron-right"></i></a>
</div>
</div>
<div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px>
<div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div>
</div>
<script src=/js/clipboard.min.js?1641010022></script>
<script src=/js/perfect-scrollbar.min.js?1641010022></script>
<script src=/js/perfect-scrollbar.jquery.min.js?1641010022></script>
<script src=/js/jquery.svg.pan.zoom.js?1641010022></script>
<script src=/js/featherlight.min.js?1641010022></script>
<script src=/js/modernizr.custom-3.6.0.js?1641010022></script>
<script src=/js/mermaid.min.js?1641010022></script>
<script>typeof mermaid!='undefined'&&typeof mermaid.mermaidAPI!='undefined'&&mermaid.mermaidAPI.initialize(Object.assign({securityLevel:"antiscript"},JSON.parse('{ "startOnLoad": true }'),{startOnLoad:!1}))</script>
<script src=/js/relearn.js?1641010022></script>
</body>
</html>